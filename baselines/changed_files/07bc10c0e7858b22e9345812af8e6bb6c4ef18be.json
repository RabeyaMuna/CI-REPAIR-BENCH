{
    "sha_fail": "07bc10c0e7858b22e9345812af8e6bb6c4ef18be",
    "changed_files": [
        {
            "commit": "07bc10c0e7858b22e9345812af8e6bb6c4ef18be",
            "file_path": "tools/accuracy_checker/tests/test_dataset.py",
            "diff": "diff --git a/tools/accuracy_checker/tests/test_dataset.py b/tools/accuracy_checker/tests/test_dataset.py\nindex 326fe44e8..bcad736b0 100644\n--- a/tools/accuracy_checker/tests/test_dataset.py\n+++ b/tools/accuracy_checker/tests/test_dataset.py\n@@ -386,3 +386,66 @@ class TestAnnotationConversion:\n         assert len(dataset.data_provider) == 1\n         assert dataset.identifiers == ['1']\n         assert dataset.data_provider.full_size == 2\n+\n+    def test_sub_evaluation_annotation_conversion_subset_ratio_from_subset_metrics(self, mocker):\n+        addition_options = {\n+            'annotation_conversion': {'converter': 'wider', 'annotation_file': Path('file')},\n+            'sub_evaluation': True,\n+            'subset_metrics': [{'subset_size': '50%'}]\n+        }\n+        config = copy_dataset_config(self.dataset_config)\n+        config.update(addition_options)\n+        converted_annotation = make_representation(['0 0 0 5 5', '0 1 1 10 10'], True)\n+        mocker.patch(\n+            'openvino.tools.accuracy_checker.annotation_converters.WiderFormatConverter.convert',\n+            return_value=ConverterReturn(converted_annotation, None, None)\n+        )\n+        subset_maker_mock = mocker.patch(\n+            'openvino.tools.accuracy_checker.dataset.make_subset'\n+        )\n+        Dataset.load_annotation(config)\n+        subset_maker_mock.assert_called_once_with(converted_annotation, 1, 666, True, False)\n+\n+    def test_sub_evaluation_annotation_conversion_subset_ratio_from_subset_metrics(self, mocker):\n+        addition_options = {\n+            'annotation_conversion': {'converter': 'wider', 'annotation_file': Path('file')},\n+            'sub_evaluation': True,\n+            'subset_metrics': [{'subset_size': '50%'}]\n+        }\n+        config = copy_dataset_config(self.dataset_config)\n+        config.update(addition_options)\n+        converted_annotation = make_representation(['0 0 0 5 5', '0 1 1 10 10'], True)\n+        mocker.patch(\n+            'openvino.tools.accuracy_checker.annotation_converters.WiderFormatConverter.convert',\n+            return_value=ConverterReturn(converted_annotation, None, None)\n+        )\n+        subset_maker_mock = mocker.patch(\n+            'openvino.tools.accuracy_checker.dataset.make_subset'\n+        )\n+        Dataset.load_annotation(config)\n+        subset_maker_mock.assert_called_once_with(converted_annotation, 1, 666, True, False)\n+\n+    def test_sub_evaluation_annotation_convered_saved_before_subset(self, mocker):\n+        addition_options = {\n+            'annotation_conversion': {'converter': 'wider', 'annotation_file': Path('file')},\n+            'annotation': Path('custom'),\n+            'sub_evaluation': True,\n+            'subset_metrics': [{'subset_size': '50%'}]\n+        }\n+        config = copy_dataset_config(self.dataset_config)\n+        config.update(addition_options)\n+        converted_annotation = make_representation(['0 0 0 5 5', '0 1 1 10 10'], True)\n+        mocker.patch(\n+            'openvino.tools.accuracy_checker.annotation_converters.WiderFormatConverter.convert',\n+            return_value=ConverterReturn(converted_annotation, None, None)\n+        )\n+        annotation_saver_mock = mocker.patch(\n+            'openvino.tools.accuracy_checker.dataset.save_annotation'\n+        )\n+        mocker.patch('pathlib.Path.exists', return_value=False)\n+        subset_maker_mock = mocker.patch(\n+            'openvino.tools.accuracy_checker.dataset.make_subset'\n+        )\n+        Dataset.load_annotation(config)\n+        annotation_saver_mock.assert_called_once_with(converted_annotation, None, Path('custom'), None, config)\n+        subset_maker_mock.assert_called_once_with(converted_annotation, 1, 666, True, False)\n"
        }
    ]
}