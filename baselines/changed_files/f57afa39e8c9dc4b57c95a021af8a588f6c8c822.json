{
    "sha_fail": "f57afa39e8c9dc4b57c95a021af8a588f6c8c822",
    "changed_files": [
        {
            "commit": "f57afa39e8c9dc4b57c95a021af8a588f6c8c822",
            "file_path": "qutebrowser/browser/webengine/webenginetab.py",
            "diff": "diff --git a/qutebrowser/browser/webengine/webenginetab.py b/qutebrowser/browser/webengine/webenginetab.py\nindex 3b4124b9..1c06aa12 100644\n--- a/qutebrowser/browser/webengine/webenginetab.py\n+++ b/qutebrowser/browser/webengine/webenginetab.py\n@@ -13,7 +13,7 @@ import html as html_utils\n from typing import cast, Union, Optional\n \n from qutebrowser.qt.core import (pyqtSignal, pyqtSlot, Qt, QPoint, QPointF, QUrl,\n-                          QObject, QByteArray)\n+                          QObject, QByteArray, QTimer)\n from qutebrowser.qt.network import QAuthenticator\n from qutebrowser.qt.webenginecore import QWebEnginePage, QWebEngineScript, QWebEngineHistory\n \n@@ -1619,6 +1619,7 @@ class WebEngineTab(browsertab.AbstractTab):\n     def _on_navigation_request(self, navigation):\n         super()._on_navigation_request(navigation)\n \n+        # WORKAROUND for https://bugreports.qt.io/browse/QTBUG-103778\n         local_schemes = {\"qute\", \"file\"}\n         qtwe_ver = version.qtwebengine_versions().webengine\n         if (\n@@ -1631,7 +1632,6 @@ class WebEngineTab(browsertab.AbstractTab):\n             (utils.VersionNumber(6, 2) <= qtwe_ver < utils.VersionNumber(6, 2, 5) or\n              utils.VersionNumber(6, 3) <= qtwe_ver < utils.VersionNumber(6, 3, 1))\n         ):\n-            # WORKAROUND for https://bugreports.qt.io/browse/QTBUG-103778\n             log.webview.debug(\n                 \"Working around blocked request from local page \"\n                 f\"{self.url().toDisplayString()}\"\n@@ -1641,12 +1641,8 @@ class WebEngineTab(browsertab.AbstractTab):\n \n         # WORKAROUND for QtWebEngine >= 6.2 not allowing form requests from\n         # qute:// to outside domains.\n-        needs_load_workarounds = (\n-            objects.backend == usertypes.Backend.QtWebEngine and\n-            version.qtwebengine_versions().webengine >= utils.VersionNumber(6, 2)\n-        )\n         if (\n-            needs_load_workarounds and\n+            qtwe_ver >= utils.VersionNumber(6, 2) and\n             self.url() == QUrl(\"qute://start/\") and\n             navigation.navigation_type == navigation.Type.form_submitted and\n             navigation.url.matches(\n@@ -1657,10 +1653,14 @@ class WebEngineTab(browsertab.AbstractTab):\n                 \"Working around qute://start loading issue for \"\n                 f\"{navigation.url.toDisplayString()}\")\n             navigation.accepted = False\n-            self.load_url(navigation.url)\n+            # Using QTimer.singleShot as WORKAROUND for this crashing otherwise\n+            # with QtWebEngine 6.10: https://bugreports.qt.io/browse/QTBUG-140543\n+            QTimer.singleShot(0, functools.partial(self.load_url, navigation.url))\n \n+        # WORKAROUND for QtWebEngine 6.2 - 6.5 blocking back/forward navigation too\n         if (\n-            needs_load_workarounds and\n+            qtwe_ver >= utils.VersionNumber(6, 2) and\n+            qtwe_ver < utils.VersionNumber(6, 6) and\n             self.url() == QUrl(\"qute://bookmarks/\") and\n             navigation.navigation_type == navigation.Type.back_forward\n         ):\n"
        }
    ]
}