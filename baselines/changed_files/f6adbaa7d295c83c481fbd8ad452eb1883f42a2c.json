{
    "sha_fail": "f6adbaa7d295c83c481fbd8ad452eb1883f42a2c",
    "changed_files": [
        {
            "commit": "f6adbaa7d295c83c481fbd8ad452eb1883f42a2c",
            "file_path": "libs/agno/agno/models/dashscope/dashscope.py",
            "diff": "diff --git a/libs/agno/agno/models/dashscope/dashscope.py b/libs/agno/agno/models/dashscope/dashscope.py\nindex 6de8ab384..a1799e070 100644\n--- a/libs/agno/agno/models/dashscope/dashscope.py\n+++ b/libs/agno/agno/models/dashscope/dashscope.py\n@@ -6,6 +6,7 @@ from pydantic import BaseModel\n \n from agno.exceptions import ModelProviderError\n from agno.models.openai.like import OpenAILike\n+from agno.models.response import ModelResponse\n \n \n @dataclass\n@@ -19,7 +20,7 @@ class DashScope(OpenAILike):\n         provider (str): The provider name. Defaults to \"Qwen\".\n         api_key (Optional[str]): The DashScope API key.\n         base_url (str): The base URL. Defaults to \"https://dashscope-intl.aliyuncs.com/compatible-mode/v1\".\n-        enable_thinking (Optional[bool]): Enable thinking process (DashScope native parameter). Defaults to None.\n+        enable_thinking (bool): Enable thinking process (DashScope native parameter). Defaults to False.\n         include_thoughts (Optional[bool]): Include thinking process in response (alternative parameter). Defaults to None.\n     \"\"\"\n \n@@ -31,8 +32,9 @@ class DashScope(OpenAILike):\n     base_url: str = \"https://dashscope-intl.aliyuncs.com/compatible-mode/v1\"\n \n     # Thinking parameters\n-    enable_thinking: Optional[bool] = None\n+    enable_thinking: bool = False\n     include_thoughts: Optional[bool] = None\n+    thinking_budget: Optional[int] = None\n \n     # DashScope supports structured outputs\n     supports_native_structured_outputs: bool = True\n@@ -75,7 +77,15 @@ class DashScope(OpenAILike):\n     ) -> Dict[str, Any]:\n         params = super().get_request_params(response_format=response_format, tools=tools, tool_choice=tool_choice)\n \n-        should_include_thoughts = self.enable_thinking or self.include_thoughts\n-        if should_include_thoughts:\n-            params[\"extra_body\"] = {\"enable_thinking\": True}\n+        if self.include_thoughts is not None:\n+            self.enable_thinking = self.include_thoughts\n+\n+        if self.enable_thinking is not None:\n+            params[\"extra_body\"] = {\n+                \"enable_thinking\": self.enable_thinking,\n+            }\n+            \n+            if self.thinking_budget is not None:\n+                params[\"extra_body\"][\"thinking_budget\"] = self.thinking_budget\n+\n         return params\n"
        }
    ]
}