{
    "sha_fail": "6aee1d58e8ce6402c48325c8c479dae84596d352",
    "changed_files": [
        {
            "commit": "6aee1d58e8ce6402c48325c8c479dae84596d352",
            "file_path": "framework/py/flwr/common/constant.py",
            "diff": "diff --git a/framework/py/flwr/common/constant.py b/framework/py/flwr/common/constant.py\nindex e577c9f5f..d741ad56f 100644\n--- a/framework/py/flwr/common/constant.py\n+++ b/framework/py/flwr/common/constant.py\n@@ -129,6 +129,7 @@ GC_THRESHOLD = 200_000_000  # 200 MB\n \n # Constants for Inflatable\n HEAD_BODY_DIVIDER = b\"\\x00\"\n+TYPE_BODY_LEN_DIVIDER = \" \"\n \n \n class MessageType:\n"
        },
        {
            "commit": "6aee1d58e8ce6402c48325c8c479dae84596d352",
            "file_path": "framework/py/flwr/common/inflatable.py",
            "diff": "diff --git a/framework/py/flwr/common/inflatable.py b/framework/py/flwr/common/inflatable.py\nindex 3dce14f22..abb5dea2f 100644\n--- a/framework/py/flwr/common/inflatable.py\n+++ b/framework/py/flwr/common/inflatable.py\n@@ -18,7 +18,7 @@\n import hashlib\n from typing import TypeVar\n \n-from .constant import HEAD_BODY_DIVIDER\n+from .constant import HEAD_BODY_DIVIDER, TYPE_BODY_LEN_DIVIDER\n \n T = TypeVar(\"T\", bound=\"InflatableObject\")\n \n@@ -44,7 +44,7 @@ def get_object_id(object_content: bytes) -> str:\n def get_object_body(object_content: bytes, cls: type[T]) -> bytes:\n     \"\"\"Return object body but raise an error if object type doesn't match class name.\"\"\"\n     class_name = cls.__qualname__\n-    object_type = object_type_from_object_content(object_content)\n+    object_type = get_object_type_from_object_content(object_content)\n     if not object_type == class_name:\n         raise ValueError(\n             f\"Class name ({class_name}) and object type \"\n@@ -58,7 +58,7 @@ def get_object_body(object_content: bytes, cls: type[T]) -> bytes:\n def add_header_to_object_body(object_body: bytes, cls: T) -> bytes:\n     \"\"\"Add header to object content.\"\"\"\n     # Construct header\n-    header = f\"{cls.__class__.__qualname__} {len(object_body)}\"\n+    header = f\"{cls.__class__.__qualname__}{TYPE_BODY_LEN_DIVIDER}{len(object_body)}\"\n     enc_header = header.encode(encoding=\"utf-8\")\n     # Concatenate header and object body\n     return enc_header + HEAD_BODY_DIVIDER + object_body\n@@ -74,7 +74,7 @@ def _get_object_body(object_content: bytes) -> bytes:\n     return object_content.split(HEAD_BODY_DIVIDER, 1)[1]\n \n \n-def object_type_from_object_content(object_content: bytes) -> str:\n+def get_object_type_from_object_content(object_content: bytes) -> str:\n     \"\"\"Return object type from bytes.\"\"\"\n     obj_head: str = _get_object_head(object_content).decode(encoding=\"utf-8\")\n-    return obj_head.split(\" \", 1)[0]\n+    return obj_head.split(TYPE_BODY_LEN_DIVIDER, 1)[0]\n"
        },
        {
            "commit": "6aee1d58e8ce6402c48325c8c479dae84596d352",
            "file_path": "framework/py/flwr/common/inflatable_test.py",
            "diff": "diff --git a/framework/py/flwr/common/inflatable_test.py b/framework/py/flwr/common/inflatable_test.py\nindex a4624c2c0..e18951ce9 100644\n--- a/framework/py/flwr/common/inflatable_test.py\n+++ b/framework/py/flwr/common/inflatable_test.py\n@@ -14,15 +14,18 @@\n # ==============================================================================\n \"\"\"Inflatable test.\"\"\"\n \n-\n+import hashlib\n from dataclasses import dataclass\n \n+from .constant import HEAD_BODY_DIVIDER, TYPE_BODY_LEN_DIVIDER\n from .inflatable import (\n     InflatableObject,\n+    _get_object_body,\n+    _get_object_head,\n     add_header_to_object_body,\n     get_object_body,\n     get_object_id,\n-    object_type_from_object_content,\n+    get_object_type_from_object_content,\n )\n \n \n@@ -45,10 +48,53 @@ def test_deflate() -> None:\n \n     # assert\n     # Class name matches\n-    assert object_type_from_object_content(obj_b) == obj.__class__.__qualname__\n+    assert get_object_type_from_object_content(obj_b) == obj.__class__.__qualname__\n     # Content length matches\n     assert len(get_object_body(obj_b, CustomDataClass)) == len(data)\n \n     # assert\n     # both objects are identical\n     assert get_object_id(obj_b) == obj.object_id\n+\n+\n+def test_get_object_id():\n+    \"\"\"Test helper function to get object id from bytes.\"\"\"\n+    some_bytes = b\"hello world\"\n+    expected = hashlib.sha256(some_bytes).hexdigest()\n+    assert get_object_id(some_bytes) == expected\n+\n+\n+def test_get_object_body() -> None:\n+    \"\"\"Test helper function to extract object body from object content.\"\"\"\n+    data = b\"this is a test\"\n+    obj = CustomDataClass(data)\n+    obj_b = obj.deflate()\n+\n+    assert _get_object_body(obj_b) == data\n+    assert get_object_body(obj_b, CustomDataClass) == data\n+\n+\n+def test_add_header_to_object_body() -> None:\n+    \"\"\"Test helper function that adds the header to the object body and returns the\n+    object content.\"\"\"\n+    data = b\"this is a test\"\n+    obj = CustomDataClass(data)\n+    obj_b = obj.deflate()\n+\n+    # Expected object head\n+    exp_obj_head = f\"CustomDataClass{TYPE_BODY_LEN_DIVIDER}{len(data)}\".encode()\n+    assert _get_object_head(obj_b) == exp_obj_head\n+\n+    # Expected object content\n+    exp_obj_conten = exp_obj_head + HEAD_BODY_DIVIDER + data\n+    assert add_header_to_object_body(data, obj) == exp_obj_conten\n+\n+\n+def test_get_object_type_from_object_content() -> None:\n+    \"\"\"Test helper function that extracts the name of the class of the deflated\n+    object.\"\"\"\n+    data = b\"this is a test\"\n+    obj = CustomDataClass(data)\n+    obj_b = obj.deflate()\n+\n+    assert get_object_type_from_object_content(obj_b) == obj.__class__.__qualname__\n"
        }
    ]
}