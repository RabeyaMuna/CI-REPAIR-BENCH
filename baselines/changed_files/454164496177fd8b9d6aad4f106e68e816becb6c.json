{
    "sha_fail": "454164496177fd8b9d6aad4f106e68e816becb6c",
    "changed_files": [
        {
            "commit": "454164496177fd8b9d6aad4f106e68e816becb6c",
            "file_path": "beetsplug/listenbrainz.py",
            "diff": "diff --git a/beetsplug/listenbrainz.py b/beetsplug/listenbrainz.py\nindex 37c57e59..bb502090 100644\n--- a/beetsplug/listenbrainz.py\n+++ b/beetsplug/listenbrainz.py\n@@ -1,6 +1,4 @@\n-\"\"\"\n-Adds Listenbrainz support to Beets.\n-\"\"\"\n+\"\"\" Adds Listenbrainz support to Beets. \"\"\"\n \n import datetime\n \n@@ -12,10 +10,12 @@ from beetsplug.lastimport import process_tracks\n \n \n class ListenBrainzPlugin(BeetsPlugin):\n+    \"\"\" A Beets plugin for interacting with ListenBrainz.\"\"\"\n     data_source = \"ListenBrainz\"\n     ROOT = \"http://api.listenbrainz.org/1/\"\n \n     def __init__(self):\n+        \"\"\"Initialize the plugin.\"\"\"\n         super().__init__()\n         self.token = self.config[\"token\"].get()\n         self.username = self.config[\"username\"].get()\n@@ -29,7 +29,6 @@ class ListenBrainzPlugin(BeetsPlugin):\n         )\n \n         def func(lib, opts, args):\n-            items = lib.items(ui.decargs(args))\n             self._lbupdate(lib, self._log)\n \n         lbupdate_cmd.func = func\n@@ -51,6 +50,7 @@ class ListenBrainzPlugin(BeetsPlugin):\n         log.info(\"{0} play-counts imported\", found_total)\n \n     def _make_request(self, url, params=None):\n+        \"\"\"Makes a request to the ListenBrainz API.\"\"\"\n         try:\n             response = requests.get(\n                 url=url,\n@@ -101,19 +101,9 @@ class ListenBrainzPlugin(BeetsPlugin):\n         else:\n             return None\n \n-    # write a function to return all the listens in the followign JSON format:\n-    \"\"\"JSON format:\n-    [\n-        {\n-            \"mbid\": \"...\",\n-            \"artist\": \"...\",\n-            \"title\": \"...\",\n-            \"playcount\": \"...\"\n-        }\n-    ]\n-    \"\"\"\n \n     def get_tracks_from_listens(self, listens):\n+        \"\"\"Returns a list of tracks from a list of listens.\"\"\"\n         tracks = []\n         for track in listens:\n             if track[\"track_metadata\"].get(\"release_name\") is None:\n@@ -157,6 +147,7 @@ class ListenBrainzPlugin(BeetsPlugin):\n         return self._make_request(url)\n \n     def get_listenbrainz_playlists(self):\n+        \"\"\"Returns a list of playlists created by ListenBrainz.\"\"\"\n         resp = self.get_playlists_createdfor(self.username)\n         playlists = resp.get(\"playlists\")\n         listenbrainz_playlists = []\n@@ -196,6 +187,7 @@ class ListenBrainzPlugin(BeetsPlugin):\n         return self.get_track_info(tracks)\n \n     def get_track_info(self, tracks):\n+        \"\"\"Returns a list of track info.\"\"\"\n         track_info = []\n         for track in tracks:\n             identifier = track.get(\"identifier\")\n"
        },
        {
            "commit": "454164496177fd8b9d6aad4f106e68e816becb6c",
            "file_path": "docs/plugins/listenbrainz.rst",
            "diff": "diff --git a/docs/plugins/listenbrainz.rst b/docs/plugins/listenbrainz.rst\nnew file mode 100644\nindex 00000000..1be15ae6\n--- /dev/null\n+++ b/docs/plugins/listenbrainz.rst\n@@ -0,0 +1,31 @@\n+.. _listenbrainz:\n+\n+ListenBrainz Plugin\n+===================\n+\n+The ListenBrainz plugin for beets allows you to interact with the ListenBrainz service.\n+\n+Installation\n+------------\n+\n+To enable the ListenBrainz plugin, add the following to your beets configuration file (`config.yaml`):\n+\n+.. code-block:: yaml\n+\n+   plugins:\n+       - listenbrainz\n+\n+You can then configure the plugin by providing your Listenbrainz token (see intructions `here`_`)and username::\n+\n+    listenbrainz:\n+        token: TOKEN\n+        username: LISTENBRAINZ_USERNAME\n+\n+\n+Usage\n+-----\n+\n+Once the plugin is enabled, you can import the listening history using the `lbimport` command in beets.\n+\n+\n+.. _here: https://listenbrainz.readthedocs.io/en/latest/users/api/index.html#get-the-user-token\n\\ No newline at end of file\n"
        }
    ]
}