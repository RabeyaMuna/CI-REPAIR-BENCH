{
    "sha_fail": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
    "changed_files": [
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "src/telegram/ext/_application.py",
            "diff": "diff --git a/src/telegram/ext/_application.py b/src/telegram/ext/_application.py\nindex 62222f8..4bf79ed 100644\n--- a/src/telegram/ext/_application.py\n+++ b/src/telegram/ext/_application.py\n@@ -116,8 +116,8 @@ class ApplicationHandlerStop(Exception):\n \n \n class Application(\n-    Generic[BT, CCT, UD, CD, BD, JQ],\n     contextlib.AbstractAsyncContextManager[\"Application\"],\n+    Generic[BT, CCT, UD, CD, BD, JQ],\n ):\n     \"\"\"This class dispatches all kinds of updates to its registered handlers, and is the entry\n     point to a PTB application.\n"
        },
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "src/telegram/ext/_basepersistence.py",
            "diff": "diff --git a/src/telegram/ext/_basepersistence.py b/src/telegram/ext/_basepersistence.py\nindex 2bdd6b8..9f7fae3 100644\n--- a/src/telegram/ext/_basepersistence.py\n+++ b/src/telegram/ext/_basepersistence.py\n@@ -54,7 +54,7 @@ class PersistenceInput(NamedTuple):\n     callback_data: bool = True\n \n \n-class BasePersistence(Generic[UD, CD, BD], ABC):\n+class BasePersistence(ABC, Generic[UD, CD, BD]):\n     \"\"\"Interface class for adding persistence to your bot.\n     Subclass this object for different implementations of a persistent bot.\n \n"
        },
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "src/telegram/ext/_handlers/basehandler.py",
            "diff": "diff --git a/src/telegram/ext/_handlers/basehandler.py b/src/telegram/ext/_handlers/basehandler.py\nindex fc60b08..8dd9387 100644\n--- a/src/telegram/ext/_handlers/basehandler.py\n+++ b/src/telegram/ext/_handlers/basehandler.py\n@@ -33,7 +33,7 @@ RT = TypeVar(\"RT\")\n UT = TypeVar(\"UT\")\n \n \n-class BaseHandler(Generic[UT, CCT, RT], ABC):\n+class BaseHandler(ABC, Generic[UT, CCT, RT]):\n     \"\"\"The base class for all update handlers. Create custom handlers by inheriting from it.\n \n     Warning:\n"
        },
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "tests/_files/test_inputmedia.py",
            "diff": "diff --git a/tests/_files/test_inputmedia.py b/tests/_files/test_inputmedia.py\nindex 57bf860..b637eaf 100644\n--- a/tests/_files/test_inputmedia.py\n+++ b/tests/_files/test_inputmedia.py\n@@ -760,7 +760,7 @@ class TestSendMediaGroupWithoutRequest:\n         ):\n             with pytest.raises(\n                 ValueError,\n-                match=\"You can only supply either group caption or media with captions.\",\n+                match=\"You can only supply either group caption or media with captions\\\\.\",\n             ):\n                 await offline_bot.send_media_group(chat_id, group, caption=\"foo\")\n \n"
        },
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "tests/_passport/test_passport.py",
            "diff": "diff --git a/tests/_passport/test_passport.py b/tests/_passport/test_passport.py\nindex 4104a2c..0ae9700 100644\n--- a/tests/_passport/test_passport.py\n+++ b/tests/_passport/test_passport.py\n@@ -420,7 +420,7 @@ class TestPassportWithoutRequest(PassportTestBase):\n \n         # Different error messages for different cryptography versions\n         with pytest.raises(\n-            ValueError, match=\"(Could not deserialize key data)|(Unable to load PEM file)\"\n+            ValueError, match=r\"(Could not deserialize key data)|(Unable to load PEM file)\"\n         ):\n             Bot(offline_bot.token, private_key=b\"Invalid key!\")\n \n"
        },
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "tests/_utils/test_files.py",
            "diff": "diff --git a/tests/_utils/test_files.py b/tests/_utils/test_files.py\nindex d789bdc..ad48e8c 100644\n--- a/tests/_utils/test_files.py\n+++ b/tests/_utils/test_files.py\n@@ -75,7 +75,7 @@ class TestFiles:\n                 telegram._utils.files.parse_file_input(string, local_mode=False), InputFile\n             )\n         elif expected_non_local is ValueError:\n-            with pytest.raises(ValueError, match=\"but local mode is not enabled.\"):\n+            with pytest.raises(ValueError, match=\"but local mode is not enabled\\\\.\"):\n                 telegram._utils.files.parse_file_input(string, local_mode=False)\n         else:\n             assert (\n"
        },
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "tests/ext/test_applicationbuilder.py",
            "diff": "diff --git a/tests/ext/test_applicationbuilder.py b/tests/ext/test_applicationbuilder.py\nindex b7ef629..b5fbecc 100644\n--- a/tests/ext/test_applicationbuilder.py\n+++ b/tests/ext/test_applicationbuilder.py\n@@ -110,7 +110,7 @@ class TestApplicationBuilder:\n             ApplicationBuilder()\n \n     def test_build_without_token(self, builder):\n-        with pytest.raises(RuntimeError, match=\"No bot token was set.\"):\n+        with pytest.raises(RuntimeError, match=\"No bot token was set\\\\.\"):\n             builder.build()\n \n     def test_build_custom_bot(self, builder, bot):\n"
        },
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "tests/ext/test_basepersistence.py",
            "diff": "diff --git a/tests/ext/test_basepersistence.py b/tests/ext/test_basepersistence.py\nindex 42be9c6..86d394b 100644\n--- a/tests/ext/test_basepersistence.py\n+++ b/tests/ext/test_basepersistence.py\n@@ -404,7 +404,7 @@ class TestBasePersistence:\n \n     @default_papp\n     def test_set_bot_error(self, papp):\n-        with pytest.raises(TypeError, match=\"when using telegram.ext.ExtBot\"):\n+        with pytest.raises(TypeError, match=\"when using telegram\\\\.ext\\\\.ExtBot\"):\n             papp.persistence.set_bot(Bot(papp.bot.token))\n \n         # just making sure that setting an ExtBoxt without callback_data_cache doesn't raise an\n@@ -419,7 +419,7 @@ class TestBasePersistence:\n                 self.store_data = PersistenceInput(False, False, False, False)\n \n         with pytest.raises(\n-            TypeError, match=\"persistence must be based on telegram.ext.BasePersistence\"\n+            TypeError, match=\"persistence must be based on telegram\\\\.ext\\\\.BasePersistence\"\n         ):\n             ApplicationBuilder().bot(bot).persistence(MyPersistence()).build()\n \n"
        },
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "tests/ext/test_callbackcontext.py",
            "diff": "diff --git a/tests/ext/test_callbackcontext.py b/tests/ext/test_callbackcontext.py\nindex d74f247..6fb13a6 100644\n--- a/tests/ext/test_callbackcontext.py\n+++ b/tests/ext/test_callbackcontext.py\n@@ -200,12 +200,12 @@ class TestCallbackContext:\n \n         callback_context = CallbackContext.from_update(update, app)\n \n-        with pytest.raises(RuntimeError, match=\"This telegram.ext.ExtBot instance does not\"):\n+        with pytest.raises(RuntimeError, match=\"This telegram\\\\.ext\\\\.ExtBot instance does not\"):\n             callback_context.drop_callback_data(None)\n \n         try:\n             app.bot = raw_bot\n-            with pytest.raises(RuntimeError, match=\"telegram.Bot does not allow for\"):\n+            with pytest.raises(RuntimeError, match=\"telegram\\\\.Bot does not allow for\"):\n                 callback_context.drop_callback_data(None)\n         finally:\n             app.bot = bot\n"
        },
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "tests/ext/test_callbackdatacache.py",
            "diff": "diff --git a/tests/ext/test_callbackdatacache.py b/tests/ext/test_callbackdatacache.py\nindex f0a5f7b..7c335bb 100644\n--- a/tests/ext/test_callbackdatacache.py\n+++ b/tests/ext/test_callbackdatacache.py\n@@ -320,7 +320,7 @@ class TestCallbackDataCache:\n             data=out.inline_keyboard[0][1].callback_data,\n         )\n \n-        with pytest.raises(KeyError, match=\"CallbackQuery was not found in cache.\"):\n+        with pytest.raises(KeyError, match=\"CallbackQuery was not found in cache\\\\.\"):\n             callback_data_cache.drop_data(callback_query)\n \n         callback_data_cache.process_callback_query(callback_query)\n"
        },
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "tests/ext/test_jobqueue.py",
            "diff": "diff --git a/tests/ext/test_jobqueue.py b/tests/ext/test_jobqueue.py\nindex 57bac18..40b5379 100644\n--- a/tests/ext/test_jobqueue.py\n+++ b/tests/ext/test_jobqueue.py\n@@ -629,7 +629,7 @@ class TestJobQueue:\n     async def test_attribute_error(self):\n         job = Job(self.job_run_once)\n         with pytest.raises(\n-            AttributeError, match=\"nor 'apscheduler.job.Job' has attribute 'error'\"\n+            AttributeError, match=\"nor 'apscheduler\\\\.job\\\\.Job' has attribute 'error'\"\n         ):\n             job.error\n \n"
        },
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "tests/ext/test_messagereactionhandler.py",
            "diff": "diff --git a/tests/ext/test_messagereactionhandler.py b/tests/ext/test_messagereactionhandler.py\nindex dd843be..6842131 100644\n--- a/tests/ext/test_messagereactionhandler.py\n+++ b/tests/ext/test_messagereactionhandler.py\n@@ -210,7 +210,7 @@ class TestMessageReactionHandler:\n     )\n     async def test_username_with_anonymous_reaction(self, app, allowed_types, kwargs):\n         with pytest.raises(\n-            ValueError, match=\"You can not filter for users and include anonymous reactions.\"\n+            ValueError, match=\"You can not filter for users and include anonymous reactions\\\\.\"\n         ):\n             MessageReactionHandler(self.callback, message_reaction_types=allowed_types, **kwargs)\n \n"
        },
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "tests/ext/test_ratelimiter.py",
            "diff": "diff --git a/tests/ext/test_ratelimiter.py b/tests/ext/test_ratelimiter.py\nindex 4f4e515..e1892b3 100644\n--- a/tests/ext/test_ratelimiter.py\n+++ b/tests/ext/test_ratelimiter.py\n@@ -54,7 +54,7 @@ class TestBaseRateLimiter:\n     request_received = None\n \n     async def test_no_rate_limiter(self, bot):\n-        with pytest.raises(ValueError, match=\"if a `ExtBot.rate_limiter` is set\"):\n+        with pytest.raises(ValueError, match=\"if a `ExtBot\\\\.rate_limiter` is set\"):\n             await bot.send_message(chat_id=42, text=\"test\", rate_limit_args=\"something\")\n \n     async def test_argument_passing(self, bot_info, monkeypatch, bot):\n"
        },
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "tests/ext/test_updater.py",
            "diff": "diff --git a/tests/ext/test_updater.py b/tests/ext/test_updater.py\nindex ebca258..9ea1b31 100644\n--- a/tests/ext/test_updater.py\n+++ b/tests/ext/test_updater.py\n@@ -849,7 +849,7 @@ class TestUpdater:\n     )\n     async def test_no_unix(self, updater):\n         async with updater:\n-            with pytest.raises(RuntimeError, match=\"binding unix sockets.\"):\n+            with pytest.raises(RuntimeError, match=\"binding unix sockets\\\\.\"):\n                 await updater.start_webhook(unix=\"DoesntMatter\", webhook_url=\"TOKEN\")\n \n     async def test_start_webhook_already_running(self, updater, monkeypatch):\n"
        },
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "tests/request/test_request.py",
            "diff": "diff --git a/tests/request/test_request.py b/tests/request/test_request.py\nindex 84cffdb..4cc92a8 100644\n--- a/tests/request/test_request.py\n+++ b/tests/request/test_request.py\n@@ -273,7 +273,7 @@ class TestRequestWithoutRequest:\n \n         with pytest.raises(\n             BadRequest,\n-            match=\"{'unknown': '42'}\",\n+            match=\"\\\\{'unknown': '42'\\\\}\",\n         ):\n             await httpx_request.post(None, None, None)\n \n"
        },
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "tests/test_bot.py",
            "diff": "diff --git a/tests/test_bot.py b/tests/test_bot.py\nindex e2c905c..fc68845 100644\n--- a/tests/test_bot.py\n+++ b/tests/test_bot.py\n@@ -2672,7 +2672,7 @@ class TestBotWithRequest:\n     # No need to duplicate here.\n \n     async def test_invalid_token_server_response(self):\n-        with pytest.raises(InvalidToken, match=\"The token `12` was rejected by the server.\"):\n+        with pytest.raises(InvalidToken, match=\"The token `12` was rejected by the server\\\\.\"):\n             async with ExtBot(token=\"12\"):\n                 pass\n \n@@ -3835,7 +3835,7 @@ class TestBotWithRequest:\n         #\n         # The error message Hide_requester_missing started showing up instead of\n         # User_already_participant. Don't know why \u2026\n-        with pytest.raises(BadRequest, match=\"User_already_participant|Hide_requester_missing\"):\n+        with pytest.raises(BadRequest, match=r\"User_already_participant|Hide_requester_missing\"):\n             await bot.decline_chat_join_request(chat_id=channel_id, user_id=chat_id)\n \n     async def test_set_chat_photo(self, bot, channel_id):\n"
        },
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "tests/test_error.py",
            "diff": "diff --git a/tests/test_error.py b/tests/test_error.py\nindex 863ec0c..2a0c7ad 100644\n--- a/tests/test_error.py\n+++ b/tests/test_error.py\n@@ -42,23 +42,23 @@ from tests.auxil.slots import mro_slots\n \n class TestErrors:\n     def test_telegram_error(self):\n-        with pytest.raises(TelegramError, match=\"^test message$\"):\n+        with pytest.raises(TelegramError, match=r\"^test message$\"):\n             raise TelegramError(\"test message\")\n-        with pytest.raises(TelegramError, match=\"^Test message$\"):\n+        with pytest.raises(TelegramError, match=r\"^Test message$\"):\n             raise TelegramError(\"Error: test message\")\n-        with pytest.raises(TelegramError, match=\"^Test message$\"):\n+        with pytest.raises(TelegramError, match=r\"^Test message$\"):\n             raise TelegramError(\"[Error]: test message\")\n-        with pytest.raises(TelegramError, match=\"^Test message$\"):\n+        with pytest.raises(TelegramError, match=r\"^Test message$\"):\n             raise TelegramError(\"Bad Request: test message\")\n \n     def test_unauthorized(self):\n         with pytest.raises(Forbidden, match=\"test message\"):\n             raise Forbidden(\"test message\")\n-        with pytest.raises(Forbidden, match=\"^Test message$\"):\n+        with pytest.raises(Forbidden, match=r\"^Test message$\"):\n             raise Forbidden(\"Error: test message\")\n-        with pytest.raises(Forbidden, match=\"^Test message$\"):\n+        with pytest.raises(Forbidden, match=r\"^Test message$\"):\n             raise Forbidden(\"[Error]: test message\")\n-        with pytest.raises(Forbidden, match=\"^Test message$\"):\n+        with pytest.raises(Forbidden, match=r\"^Test message$\"):\n             raise Forbidden(\"Bad Request: test message\")\n \n     def test_invalid_token(self):\n@@ -68,25 +68,25 @@ class TestErrors:\n     def test_network_error(self):\n         with pytest.raises(NetworkError, match=\"test message\"):\n             raise NetworkError(\"test message\")\n-        with pytest.raises(NetworkError, match=\"^Test message$\"):\n+        with pytest.raises(NetworkError, match=r\"^Test message$\"):\n             raise NetworkError(\"Error: test message\")\n-        with pytest.raises(NetworkError, match=\"^Test message$\"):\n+        with pytest.raises(NetworkError, match=r\"^Test message$\"):\n             raise NetworkError(\"[Error]: test message\")\n-        with pytest.raises(NetworkError, match=\"^Test message$\"):\n+        with pytest.raises(NetworkError, match=r\"^Test message$\"):\n             raise NetworkError(\"Bad Request: test message\")\n \n     def test_bad_request(self):\n         with pytest.raises(BadRequest, match=\"test message\"):\n             raise BadRequest(\"test message\")\n-        with pytest.raises(BadRequest, match=\"^Test message$\"):\n+        with pytest.raises(BadRequest, match=r\"^Test message$\"):\n             raise BadRequest(\"Error: test message\")\n-        with pytest.raises(BadRequest, match=\"^Test message$\"):\n+        with pytest.raises(BadRequest, match=r\"^Test message$\"):\n             raise BadRequest(\"[Error]: test message\")\n-        with pytest.raises(BadRequest, match=\"^Test message$\"):\n+        with pytest.raises(BadRequest, match=r\"^Test message$\"):\n             raise BadRequest(\"Bad Request: test message\")\n \n     def test_timed_out(self):\n-        with pytest.raises(TimedOut, match=\"^Timed out$\"):\n+        with pytest.raises(TimedOut, match=r\"^Timed out$\"):\n             raise TimedOut\n \n     def test_chat_migrated(self):\n@@ -97,11 +97,11 @@ class TestErrors:\n     @pytest.mark.parametrize(\"retry_after\", [12, dtm.timedelta(seconds=12)])\n     def test_retry_after(self, PTB_TIMEDELTA, retry_after):\n         if PTB_TIMEDELTA:\n-            with pytest.raises(RetryAfter, match=\"Flood control exceeded. Retry in 0:00:12\"):\n+            with pytest.raises(RetryAfter, match=\"Flood control exceeded\\\\. Retry in 0:00:12\"):\n                 raise (exception := RetryAfter(retry_after))\n             assert type(exception.retry_after) is dtm.timedelta\n         else:\n-            with pytest.raises(RetryAfter, match=\"Flood control exceeded. Retry in 12 seconds\"):\n+            with pytest.raises(RetryAfter, match=\"Flood control exceeded\\\\. Retry in 12 seconds\"):\n                 raise (exception := RetryAfter(retry_after))\n             assert type(exception.retry_after) is int\n \n@@ -118,7 +118,7 @@ class TestErrors:\n             assert type(retry_after) is int\n \n     def test_conflict(self):\n-        with pytest.raises(Conflict, match=\"Something something.\"):\n+        with pytest.raises(Conflict, match=\"Something something\\\\.\"):\n             raise Conflict(\"Something something.\")\n \n     @pytest.mark.parametrize(\n"
        },
        {
            "commit": "066ba5bb325850910e8f4cb76a91e3293c3b7619",
            "file_path": "tests/test_message.py",
            "diff": "diff --git a/tests/test_message.py b/tests/test_message.py\nindex 81fa66f..3bafe22 100644\n--- a/tests/test_message.py\n+++ b/tests/test_message.py\n@@ -603,13 +603,13 @@ class TestMessageWithoutRequest(MessageTestBase):\n         \"\"\"Used in testing reply_* below. Makes sure that do_quote is handled correctly\"\"\"\n         with pytest.raises(\n             ValueError,\n-            match=\"`reply_to_message_id` and `reply_parameters` are mutually exclusive.\",\n+            match=\"`reply_to_message_id` and `reply_parameters` are mutually exclusive\\\\.\",\n         ):\n             await method(*args, reply_to_message_id=42, reply_parameters=42)\n \n         with pytest.raises(\n             ValueError,\n-            match=\"`allow_sending_without_reply` and `reply_parameters` are mutually exclusive.\",\n+            match=\"`allow_sending_without_reply` and `reply_parameters` are mutually exclusive\\\\.\",\n         ):\n             await method(*args, allow_sending_without_reply=True, reply_parameters=42)\n \n@@ -1463,7 +1463,7 @@ class TestMessageWithoutRequest(MessageTestBase):\n         message.text = \"AA\"\n         with pytest.raises(\n             ValueError,\n-            match=\"You requested the 5-th occurrence of 'A', but this text appears only 2 times.\",\n+            match=\"You requested the 5-th occurrence of 'A', but this text appears only 2 times\",\n         ):\n             message.compute_quote_position_and_entities(\"A\", 5)\n \n@@ -1472,7 +1472,7 @@ class TestMessageWithoutRequest(MessageTestBase):\n         message.caption = None\n         with pytest.raises(\n             RuntimeError,\n-            match=\"This message has neither text nor caption.\",\n+            match=\"This message has neither text nor caption\\\\.\",\n         ):\n             message.compute_quote_position_and_entities(\"A\", 5)\n \n"
        }
    ]
}