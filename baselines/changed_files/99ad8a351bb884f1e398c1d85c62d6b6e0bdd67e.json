{
    "sha_fail": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
    "changed_files": [
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks/gapic_version.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks/gapic_version.py b/packages/google-cloud-tasks/google/cloud/tasks/gapic_version.py\nindex 209de14827..360a0d13eb 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks/gapic_version.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks/gapic_version.py\n@@ -13,4 +13,4 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n #\n-__version__ = \"2.15.0\"  # {x-release-please-version}\n+__version__ = \"0.0.0\"  # {x-release-please-version}\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2/gapic_version.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2/gapic_version.py b/packages/google-cloud-tasks/google/cloud/tasks_v2/gapic_version.py\nindex 209de14827..360a0d13eb 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2/gapic_version.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2/gapic_version.py\n@@ -13,4 +13,4 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n #\n-__version__ = \"2.15.0\"  # {x-release-please-version}\n+__version__ = \"0.0.0\"  # {x-release-please-version}\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta2/__init__.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/__init__.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/__init__.py\nindex fe776d9cbf..141479f630 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/__init__.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/__init__.py\n@@ -21,8 +21,6 @@ __version__ = package_version.__version__\n from .services.cloud_tasks import CloudTasksAsyncClient, CloudTasksClient\n from .types.cloudtasks import (\n     AcknowledgeTaskRequest,\n-    BufferTaskRequest,\n-    BufferTaskResponse,\n     CancelLeaseRequest,\n     CreateQueueRequest,\n     CreateTaskRequest,\n@@ -69,8 +67,6 @@ __all__ = (\n     \"AppEngineHttpTarget\",\n     \"AppEngineRouting\",\n     \"AttemptStatus\",\n-    \"BufferTaskRequest\",\n-    \"BufferTaskResponse\",\n     \"CancelLeaseRequest\",\n     \"CloudTasksClient\",\n     \"CreateQueueRequest\",\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta2/gapic_version.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/gapic_version.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/gapic_version.py\nindex 209de14827..360a0d13eb 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/gapic_version.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/gapic_version.py\n@@ -13,4 +13,4 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n #\n-__version__ = \"2.15.0\"  # {x-release-please-version}\n+__version__ = \"0.0.0\"  # {x-release-please-version}\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/async_client.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/async_client.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/async_client.py\nindex 3d225848fc..22b8efbfd2 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/async_client.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/async_client.py\n@@ -42,7 +42,6 @@ try:\n except AttributeError:  # pragma: NO COVER\n     OptionalRetry = Union[retries.AsyncRetry, object]  # type: ignore\n \n-from google.api import httpbody_pb2  # type: ignore\n from google.cloud.location import locations_pb2  # type: ignore\n from google.iam.v1 import iam_policy_pb2  # type: ignore\n from google.iam.v1 import policy_pb2  # type: ignore\n@@ -2876,149 +2875,6 @@ class CloudTasksAsyncClient:\n         # Done; return the response.\n         return response\n \n-    async def buffer_task(\n-        self,\n-        request: Optional[Union[cloudtasks.BufferTaskRequest, dict]] = None,\n-        *,\n-        queue: Optional[str] = None,\n-        task_id: Optional[str] = None,\n-        body: Optional[httpbody_pb2.HttpBody] = None,\n-        retry: OptionalRetry = gapic_v1.method.DEFAULT,\n-        timeout: Union[float, object] = gapic_v1.method.DEFAULT,\n-        metadata: Sequence[Tuple[str, str]] = (),\n-    ) -> cloudtasks.BufferTaskResponse:\n-        r\"\"\"Creates and buffers a new task without the need to explicitly\n-        define a Task message. The queue must have [HTTP\n-        target][google.cloud.tasks.v2beta2.HttpTarget]. To create the\n-        task with a custom ID, use the following format and set TASK_ID\n-        to your desired ID:\n-        projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID/tasks/TASK_ID:buffer\n-        To create the task with an automatically generated ID, use the\n-        following format:\n-        projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID/tasks:buffer.\n-        Note: This feature is in its experimental stage. You must\n-        request access to the API through the `Cloud Tasks BufferTask\n-        Experiment Signup form <https://forms.gle/X8Zr5hiXH5tTGFqh8>`__.\n-\n-        .. code-block:: python\n-\n-            # This snippet has been automatically generated and should be regarded as a\n-            # code template only.\n-            # It will require modifications to work:\n-            # - It may require correct/in-range values for request initialization.\n-            # - It may require specifying regional endpoints when creating the service\n-            #   client as shown in:\n-            #   https://googleapis.dev/python/google-api-core/latest/client_options.html\n-            from google.cloud import tasks_v2beta2\n-\n-            async def sample_buffer_task():\n-                # Create a client\n-                client = tasks_v2beta2.CloudTasksAsyncClient()\n-\n-                # Initialize request argument(s)\n-                request = tasks_v2beta2.BufferTaskRequest(\n-                    queue=\"queue_value\",\n-                )\n-\n-                # Make the request\n-                response = await client.buffer_task(request=request)\n-\n-                # Handle the response\n-                print(response)\n-\n-        Args:\n-            request (Optional[Union[google.cloud.tasks_v2beta2.types.BufferTaskRequest, dict]]):\n-                The request object. LINT.IfChange Request message for\n-                [BufferTask][google.cloud.tasks.v2beta2.CloudTasks.BufferTask].\n-            queue (:class:`str`):\n-                Required. The parent queue name. For example:\n-                projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID\\`\n-\n-                The queue must already exist.\n-\n-                This corresponds to the ``queue`` field\n-                on the ``request`` instance; if ``request`` is provided, this\n-                should not be set.\n-            task_id (:class:`str`):\n-                Optional. Task ID for the task being\n-                created. If not provided, a random task\n-                ID is assigned to the task.\n-\n-                This corresponds to the ``task_id`` field\n-                on the ``request`` instance; if ``request`` is provided, this\n-                should not be set.\n-            body (:class:`google.api.httpbody_pb2.HttpBody`):\n-                Optional. Body of the HTTP request.\n-\n-                The body can take any generic value. The value is\n-                written to the [HttpRequest][payload] of the [Task].\n-\n-                This corresponds to the ``body`` field\n-                on the ``request`` instance; if ``request`` is provided, this\n-                should not be set.\n-            retry (google.api_core.retry_async.AsyncRetry): Designation of what errors, if any,\n-                should be retried.\n-            timeout (float): The timeout for this request.\n-            metadata (Sequence[Tuple[str, str]]): Strings which should be\n-                sent along with the request as metadata.\n-\n-        Returns:\n-            google.cloud.tasks_v2beta2.types.BufferTaskResponse:\n-                Response message for\n-                   [BufferTask][google.cloud.tasks.v2beta2.CloudTasks.BufferTask].\n-\n-        \"\"\"\n-        # Create or coerce a protobuf request object.\n-        # Quick check: If we got a request object, we should *not* have\n-        # gotten any keyword arguments that map to the request.\n-        has_flattened_params = any([queue, task_id, body])\n-        if request is not None and has_flattened_params:\n-            raise ValueError(\n-                \"If the `request` argument is set, then none of \"\n-                \"the individual field arguments should be set.\"\n-            )\n-\n-        request = cloudtasks.BufferTaskRequest(request)\n-\n-        # If we have keyword arguments corresponding to fields on the\n-        # request, apply these.\n-        if queue is not None:\n-            request.queue = queue\n-        if task_id is not None:\n-            request.task_id = task_id\n-        if body is not None:\n-            request.body = body\n-\n-        # Wrap the RPC method; this adds retry and timeout information,\n-        # and friendly error handling.\n-        rpc = gapic_v1.method_async.wrap_method(\n-            self._client._transport.buffer_task,\n-            default_timeout=20.0,\n-            client_info=DEFAULT_CLIENT_INFO,\n-        )\n-\n-        # Certain fields should be provided within the metadata header;\n-        # add these here.\n-        metadata = tuple(metadata) + (\n-            gapic_v1.routing_header.to_grpc_metadata(\n-                (\n-                    (\"queue\", request.queue),\n-                    (\"task_id\", request.task_id),\n-                )\n-            ),\n-        )\n-\n-        # Send the request.\n-        response = await rpc(\n-            request,\n-            retry=retry,\n-            timeout=timeout,\n-            metadata=metadata,\n-        )\n-\n-        # Done; return the response.\n-        return response\n-\n     async def get_location(\n         self,\n         request: Optional[locations_pb2.GetLocationRequest] = None,\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/client.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/client.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/client.py\nindex 3120b9e0aa..fdd68b4045 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/client.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/client.py\n@@ -46,7 +46,6 @@ try:\n except AttributeError:  # pragma: NO COVER\n     OptionalRetry = Union[retries.Retry, object]  # type: ignore\n \n-from google.api import httpbody_pb2  # type: ignore\n from google.cloud.location import locations_pb2  # type: ignore\n from google.iam.v1 import iam_policy_pb2  # type: ignore\n from google.iam.v1 import policy_pb2  # type: ignore\n@@ -3044,149 +3043,6 @@ class CloudTasksClient(metaclass=CloudTasksClientMeta):\n         # Done; return the response.\n         return response\n \n-    def buffer_task(\n-        self,\n-        request: Optional[Union[cloudtasks.BufferTaskRequest, dict]] = None,\n-        *,\n-        queue: Optional[str] = None,\n-        task_id: Optional[str] = None,\n-        body: Optional[httpbody_pb2.HttpBody] = None,\n-        retry: OptionalRetry = gapic_v1.method.DEFAULT,\n-        timeout: Union[float, object] = gapic_v1.method.DEFAULT,\n-        metadata: Sequence[Tuple[str, str]] = (),\n-    ) -> cloudtasks.BufferTaskResponse:\n-        r\"\"\"Creates and buffers a new task without the need to explicitly\n-        define a Task message. The queue must have [HTTP\n-        target][google.cloud.tasks.v2beta2.HttpTarget]. To create the\n-        task with a custom ID, use the following format and set TASK_ID\n-        to your desired ID:\n-        projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID/tasks/TASK_ID:buffer\n-        To create the task with an automatically generated ID, use the\n-        following format:\n-        projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID/tasks:buffer.\n-        Note: This feature is in its experimental stage. You must\n-        request access to the API through the `Cloud Tasks BufferTask\n-        Experiment Signup form <https://forms.gle/X8Zr5hiXH5tTGFqh8>`__.\n-\n-        .. code-block:: python\n-\n-            # This snippet has been automatically generated and should be regarded as a\n-            # code template only.\n-            # It will require modifications to work:\n-            # - It may require correct/in-range values for request initialization.\n-            # - It may require specifying regional endpoints when creating the service\n-            #   client as shown in:\n-            #   https://googleapis.dev/python/google-api-core/latest/client_options.html\n-            from google.cloud import tasks_v2beta2\n-\n-            def sample_buffer_task():\n-                # Create a client\n-                client = tasks_v2beta2.CloudTasksClient()\n-\n-                # Initialize request argument(s)\n-                request = tasks_v2beta2.BufferTaskRequest(\n-                    queue=\"queue_value\",\n-                )\n-\n-                # Make the request\n-                response = client.buffer_task(request=request)\n-\n-                # Handle the response\n-                print(response)\n-\n-        Args:\n-            request (Union[google.cloud.tasks_v2beta2.types.BufferTaskRequest, dict]):\n-                The request object. LINT.IfChange Request message for\n-                [BufferTask][google.cloud.tasks.v2beta2.CloudTasks.BufferTask].\n-            queue (str):\n-                Required. The parent queue name. For example:\n-                projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID\\`\n-\n-                The queue must already exist.\n-\n-                This corresponds to the ``queue`` field\n-                on the ``request`` instance; if ``request`` is provided, this\n-                should not be set.\n-            task_id (str):\n-                Optional. Task ID for the task being\n-                created. If not provided, a random task\n-                ID is assigned to the task.\n-\n-                This corresponds to the ``task_id`` field\n-                on the ``request`` instance; if ``request`` is provided, this\n-                should not be set.\n-            body (google.api.httpbody_pb2.HttpBody):\n-                Optional. Body of the HTTP request.\n-\n-                The body can take any generic value. The value is\n-                written to the [HttpRequest][payload] of the [Task].\n-\n-                This corresponds to the ``body`` field\n-                on the ``request`` instance; if ``request`` is provided, this\n-                should not be set.\n-            retry (google.api_core.retry.Retry): Designation of what errors, if any,\n-                should be retried.\n-            timeout (float): The timeout for this request.\n-            metadata (Sequence[Tuple[str, str]]): Strings which should be\n-                sent along with the request as metadata.\n-\n-        Returns:\n-            google.cloud.tasks_v2beta2.types.BufferTaskResponse:\n-                Response message for\n-                   [BufferTask][google.cloud.tasks.v2beta2.CloudTasks.BufferTask].\n-\n-        \"\"\"\n-        # Create or coerce a protobuf request object.\n-        # Quick check: If we got a request object, we should *not* have\n-        # gotten any keyword arguments that map to the request.\n-        has_flattened_params = any([queue, task_id, body])\n-        if request is not None and has_flattened_params:\n-            raise ValueError(\n-                \"If the `request` argument is set, then none of \"\n-                \"the individual field arguments should be set.\"\n-            )\n-\n-        # Minor optimization to avoid making a copy if the user passes\n-        # in a cloudtasks.BufferTaskRequest.\n-        # There's no risk of modifying the input as we've already verified\n-        # there are no flattened fields.\n-        if not isinstance(request, cloudtasks.BufferTaskRequest):\n-            request = cloudtasks.BufferTaskRequest(request)\n-            # If we have keyword arguments corresponding to fields on the\n-            # request, apply these.\n-            if queue is not None:\n-                request.queue = queue\n-            if task_id is not None:\n-                request.task_id = task_id\n-            if body is not None:\n-                request.body = body\n-\n-        # Wrap the RPC method; this adds retry and timeout information,\n-        # and friendly error handling.\n-        rpc = self._transport._wrapped_methods[self._transport.buffer_task]\n-\n-        # Certain fields should be provided within the metadata header;\n-        # add these here.\n-        metadata = tuple(metadata) + (\n-            gapic_v1.routing_header.to_grpc_metadata(\n-                (\n-                    (\"queue\", request.queue),\n-                    (\"task_id\", request.task_id),\n-                )\n-            ),\n-        )\n-\n-        # Send the request.\n-        response = rpc(\n-            request,\n-            retry=retry,\n-            timeout=timeout,\n-            metadata=metadata,\n-        )\n-\n-        # Done; return the response.\n-        return response\n-\n     def __enter__(self) -> \"CloudTasksClient\":\n         return self\n \n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/base.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/base.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/base.py\nindex f1f8bd036c..4ec7359e14 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/base.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/base.py\n@@ -315,11 +315,6 @@ class CloudTasksTransport(abc.ABC):\n                 default_timeout=20.0,\n                 client_info=client_info,\n             ),\n-            self.buffer_task: gapic_v1.method.wrap_method(\n-                self.buffer_task,\n-                default_timeout=20.0,\n-                client_info=client_info,\n-            ),\n         }\n \n     def close(self):\n@@ -510,15 +505,6 @@ class CloudTasksTransport(abc.ABC):\n     ) -> Callable[[cloudtasks.RunTaskRequest], Union[task.Task, Awaitable[task.Task]]]:\n         raise NotImplementedError()\n \n-    @property\n-    def buffer_task(\n-        self,\n-    ) -> Callable[\n-        [cloudtasks.BufferTaskRequest],\n-        Union[cloudtasks.BufferTaskResponse, Awaitable[cloudtasks.BufferTaskResponse]],\n-    ]:\n-        raise NotImplementedError()\n-\n     @property\n     def get_location(\n         self,\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/grpc.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/grpc.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/grpc.py\nindex 781246213e..ac655d7331 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/grpc.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/grpc.py\n@@ -966,43 +966,6 @@ class CloudTasksGrpcTransport(CloudTasksTransport):\n             )\n         return self._stubs[\"run_task\"]\n \n-    @property\n-    def buffer_task(\n-        self,\n-    ) -> Callable[[cloudtasks.BufferTaskRequest], cloudtasks.BufferTaskResponse]:\n-        r\"\"\"Return a callable for the buffer task method over gRPC.\n-\n-        Creates and buffers a new task without the need to explicitly\n-        define a Task message. The queue must have [HTTP\n-        target][google.cloud.tasks.v2beta2.HttpTarget]. To create the\n-        task with a custom ID, use the following format and set TASK_ID\n-        to your desired ID:\n-        projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID/tasks/TASK_ID:buffer\n-        To create the task with an automatically generated ID, use the\n-        following format:\n-        projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID/tasks:buffer.\n-        Note: This feature is in its experimental stage. You must\n-        request access to the API through the `Cloud Tasks BufferTask\n-        Experiment Signup form <https://forms.gle/X8Zr5hiXH5tTGFqh8>`__.\n-\n-        Returns:\n-            Callable[[~.BufferTaskRequest],\n-                    ~.BufferTaskResponse]:\n-                A function that, when called, will call the underlying RPC\n-                on the server.\n-        \"\"\"\n-        # Generate a \"stub function\" on-the-fly which will actually make\n-        # the request.\n-        # gRPC handles serialization and deserialization, so we just need\n-        # to pass in the functions for each.\n-        if \"buffer_task\" not in self._stubs:\n-            self._stubs[\"buffer_task\"] = self.grpc_channel.unary_unary(\n-                \"/google.cloud.tasks.v2beta2.CloudTasks/BufferTask\",\n-                request_serializer=cloudtasks.BufferTaskRequest.serialize,\n-                response_deserializer=cloudtasks.BufferTaskResponse.deserialize,\n-            )\n-        return self._stubs[\"buffer_task\"]\n-\n     def close(self):\n         self.grpc_channel.close()\n \n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/grpc_asyncio.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/grpc_asyncio.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/grpc_asyncio.py\nindex ca3d162f0b..def297cbce 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/grpc_asyncio.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/grpc_asyncio.py\n@@ -991,45 +991,6 @@ class CloudTasksGrpcAsyncIOTransport(CloudTasksTransport):\n             )\n         return self._stubs[\"run_task\"]\n \n-    @property\n-    def buffer_task(\n-        self,\n-    ) -> Callable[\n-        [cloudtasks.BufferTaskRequest], Awaitable[cloudtasks.BufferTaskResponse]\n-    ]:\n-        r\"\"\"Return a callable for the buffer task method over gRPC.\n-\n-        Creates and buffers a new task without the need to explicitly\n-        define a Task message. The queue must have [HTTP\n-        target][google.cloud.tasks.v2beta2.HttpTarget]. To create the\n-        task with a custom ID, use the following format and set TASK_ID\n-        to your desired ID:\n-        projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID/tasks/TASK_ID:buffer\n-        To create the task with an automatically generated ID, use the\n-        following format:\n-        projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID/tasks:buffer.\n-        Note: This feature is in its experimental stage. You must\n-        request access to the API through the `Cloud Tasks BufferTask\n-        Experiment Signup form <https://forms.gle/X8Zr5hiXH5tTGFqh8>`__.\n-\n-        Returns:\n-            Callable[[~.BufferTaskRequest],\n-                    Awaitable[~.BufferTaskResponse]]:\n-                A function that, when called, will call the underlying RPC\n-                on the server.\n-        \"\"\"\n-        # Generate a \"stub function\" on-the-fly which will actually make\n-        # the request.\n-        # gRPC handles serialization and deserialization, so we just need\n-        # to pass in the functions for each.\n-        if \"buffer_task\" not in self._stubs:\n-            self._stubs[\"buffer_task\"] = self.grpc_channel.unary_unary(\n-                \"/google.cloud.tasks.v2beta2.CloudTasks/BufferTask\",\n-                request_serializer=cloudtasks.BufferTaskRequest.serialize,\n-                response_deserializer=cloudtasks.BufferTaskResponse.deserialize,\n-            )\n-        return self._stubs[\"buffer_task\"]\n-\n     def close(self):\n         return self.grpc_channel.close()\n \n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/rest.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/rest.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/rest.py\nindex a33234ad6b..a7f3b709a2 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/rest.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/services/cloud_tasks/transports/rest.py\n@@ -76,14 +76,6 @@ class CloudTasksRestInterceptor:\n                 logging.log(f\"Received request: {request}\")\n                 return request, metadata\n \n-            def pre_buffer_task(self, request, metadata):\n-                logging.log(f\"Received request: {request}\")\n-                return request, metadata\n-\n-            def post_buffer_task(self, response):\n-                logging.log(f\"Received response: {response}\")\n-                return response\n-\n             def pre_cancel_lease(self, request, metadata):\n                 logging.log(f\"Received request: {request}\")\n                 return request, metadata\n@@ -250,27 +242,6 @@ class CloudTasksRestInterceptor:\n         \"\"\"\n         return request, metadata\n \n-    def pre_buffer_task(\n-        self, request: cloudtasks.BufferTaskRequest, metadata: Sequence[Tuple[str, str]]\n-    ) -> Tuple[cloudtasks.BufferTaskRequest, Sequence[Tuple[str, str]]]:\n-        \"\"\"Pre-rpc interceptor for buffer_task\n-\n-        Override in a subclass to manipulate the request or metadata\n-        before they are sent to the CloudTasks server.\n-        \"\"\"\n-        return request, metadata\n-\n-    def post_buffer_task(\n-        self, response: cloudtasks.BufferTaskResponse\n-    ) -> cloudtasks.BufferTaskResponse:\n-        \"\"\"Post-rpc interceptor for buffer_task\n-\n-        Override in a subclass to manipulate the response\n-        after it is returned by the CloudTasks server but before\n-        it is returned to user code.\n-        \"\"\"\n-        return response\n-\n     def pre_cancel_lease(\n         self,\n         request: cloudtasks.CancelLeaseRequest,\n@@ -868,104 +839,6 @@ class CloudTasksRestTransport(CloudTasksTransport):\n             if response.status_code >= 400:\n                 raise core_exceptions.from_http_response(response)\n \n-    class _BufferTask(CloudTasksRestStub):\n-        def __hash__(self):\n-            return hash(\"BufferTask\")\n-\n-        __REQUIRED_FIELDS_DEFAULT_VALUES: Dict[str, Any] = {}\n-\n-        @classmethod\n-        def _get_unset_required_fields(cls, message_dict):\n-            return {\n-                k: v\n-                for k, v in cls.__REQUIRED_FIELDS_DEFAULT_VALUES.items()\n-                if k not in message_dict\n-            }\n-\n-        def __call__(\n-            self,\n-            request: cloudtasks.BufferTaskRequest,\n-            *,\n-            retry: OptionalRetry = gapic_v1.method.DEFAULT,\n-            timeout: Optional[float] = None,\n-            metadata: Sequence[Tuple[str, str]] = (),\n-        ) -> cloudtasks.BufferTaskResponse:\n-            r\"\"\"Call the buffer task method over HTTP.\n-\n-            Args:\n-                request (~.cloudtasks.BufferTaskRequest):\n-                    The request object. LINT.IfChange Request message for\n-                [BufferTask][google.cloud.tasks.v2beta2.CloudTasks.BufferTask].\n-                retry (google.api_core.retry.Retry): Designation of what errors, if any,\n-                    should be retried.\n-                timeout (float): The timeout for this request.\n-                metadata (Sequence[Tuple[str, str]]): Strings which should be\n-                    sent along with the request as metadata.\n-\n-            Returns:\n-                ~.cloudtasks.BufferTaskResponse:\n-                    Response message for\n-                [BufferTask][google.cloud.tasks.v2beta2.CloudTasks.BufferTask].\n-\n-            \"\"\"\n-\n-            http_options: List[Dict[str, str]] = [\n-                {\n-                    \"method\": \"post\",\n-                    \"uri\": \"/v2beta2/{queue=projects/*/locations/*/queues/*}/tasks/{task_id}:buffer\",\n-                    \"body\": \"*\",\n-                },\n-            ]\n-            request, metadata = self._interceptor.pre_buffer_task(request, metadata)\n-            pb_request = cloudtasks.BufferTaskRequest.pb(request)\n-            transcoded_request = path_template.transcode(http_options, pb_request)\n-\n-            # Jsonify the request body\n-\n-            body = json_format.MessageToJson(\n-                transcoded_request[\"body\"],\n-                including_default_value_fields=False,\n-                use_integers_for_enums=True,\n-            )\n-            uri = transcoded_request[\"uri\"]\n-            method = transcoded_request[\"method\"]\n-\n-            # Jsonify the query params\n-            query_params = json.loads(\n-                json_format.MessageToJson(\n-                    transcoded_request[\"query_params\"],\n-                    including_default_value_fields=False,\n-                    use_integers_for_enums=True,\n-                )\n-            )\n-            query_params.update(self._get_unset_required_fields(query_params))\n-\n-            query_params[\"$alt\"] = \"json;enum-encoding=int\"\n-\n-            # Send the request\n-            headers = dict(metadata)\n-            headers[\"Content-Type\"] = \"application/json\"\n-            response = getattr(self._session, method)(\n-                \"{host}{uri}\".format(host=self._host, uri=uri),\n-                timeout=timeout,\n-                headers=headers,\n-                params=rest_helpers.flatten_query_params(query_params, strict=True),\n-                data=body,\n-            )\n-\n-            # In case of error, raise the appropriate core_exceptions.GoogleAPICallError exception\n-            # subclass.\n-            if response.status_code >= 400:\n-                raise core_exceptions.from_http_response(response)\n-\n-            # Return the response\n-            resp = cloudtasks.BufferTaskResponse()\n-            pb_resp = cloudtasks.BufferTaskResponse.pb(resp)\n-\n-            json_format.Parse(response.content, pb_resp, ignore_unknown_fields=True)\n-            resp = self._interceptor.post_buffer_task(resp)\n-            return resp\n-\n     class _CancelLease(CloudTasksRestStub):\n         def __hash__(self):\n             return hash(\"CancelLease\")\n@@ -2927,14 +2800,6 @@ class CloudTasksRestTransport(CloudTasksTransport):\n         # In C++ this would require a dynamic_cast\n         return self._AcknowledgeTask(self._session, self._host, self._interceptor)  # type: ignore\n \n-    @property\n-    def buffer_task(\n-        self,\n-    ) -> Callable[[cloudtasks.BufferTaskRequest], cloudtasks.BufferTaskResponse]:\n-        # The return type is fine, but mypy isn't sophisticated enough to determine what's going on here.\n-        # In C++ this would require a dynamic_cast\n-        return self._BufferTask(self._session, self._host, self._interceptor)  # type: ignore\n-\n     @property\n     def cancel_lease(self) -> Callable[[cloudtasks.CancelLeaseRequest], task.Task]:\n         # The return type is fine, but mypy isn't sophisticated enough to determine what's going on here.\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta2/types/__init__.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/types/__init__.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/types/__init__.py\nindex 1c68ddb34d..b23bf25655 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/types/__init__.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/types/__init__.py\n@@ -15,8 +15,6 @@\n #\n from .cloudtasks import (\n     AcknowledgeTaskRequest,\n-    BufferTaskRequest,\n-    BufferTaskResponse,\n     CancelLeaseRequest,\n     CreateQueueRequest,\n     CreateTaskRequest,\n@@ -58,8 +56,6 @@ from .task import AttemptStatus, Task, TaskStatus\n \n __all__ = (\n     \"AcknowledgeTaskRequest\",\n-    \"BufferTaskRequest\",\n-    \"BufferTaskResponse\",\n     \"CancelLeaseRequest\",\n     \"CreateQueueRequest\",\n     \"CreateTaskRequest\",\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta2/types/cloudtasks.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/types/cloudtasks.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/types/cloudtasks.py\nindex 8a2a69260a..6766871bd8 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/types/cloudtasks.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta2/types/cloudtasks.py\n@@ -50,8 +50,6 @@ __protobuf__ = proto.module(\n         \"RenewLeaseRequest\",\n         \"CancelLeaseRequest\",\n         \"RunTaskRequest\",\n-        \"BufferTaskRequest\",\n-        \"BufferTaskResponse\",\n     },\n )\n \n@@ -906,56 +904,4 @@ class RunTaskRequest(proto.Message):\n     )\n \n \n-class BufferTaskRequest(proto.Message):\n-    r\"\"\"LINT.IfChange Request message for\n-    [BufferTask][google.cloud.tasks.v2beta2.CloudTasks.BufferTask].\n-\n-    Attributes:\n-        queue (str):\n-            Required. The parent queue name. For example:\n-            projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID\\`\n-\n-            The queue must already exist.\n-        task_id (str):\n-            Optional. Task ID for the task being created.\n-            If not provided, a random task ID is assigned to\n-            the task.\n-        body (google.api.httpbody_pb2.HttpBody):\n-            Optional. Body of the HTTP request.\n-\n-            The body can take any generic value. The value is written to\n-            the [HttpRequest][payload] of the [Task].\n-    \"\"\"\n-\n-    queue: str = proto.Field(\n-        proto.STRING,\n-        number=1,\n-    )\n-    task_id: str = proto.Field(\n-        proto.STRING,\n-        number=2,\n-    )\n-    body: httpbody_pb2.HttpBody = proto.Field(\n-        proto.MESSAGE,\n-        number=3,\n-        message=httpbody_pb2.HttpBody,\n-    )\n-\n-\n-class BufferTaskResponse(proto.Message):\n-    r\"\"\"Response message for\n-    [BufferTask][google.cloud.tasks.v2beta2.CloudTasks.BufferTask].\n-\n-    Attributes:\n-        task (google.cloud.tasks_v2beta2.types.Task):\n-            The created task.\n-    \"\"\"\n-\n-    task: gct_task.Task = proto.Field(\n-        proto.MESSAGE,\n-        number=1,\n-        message=gct_task.Task,\n-    )\n-\n-\n __all__ = tuple(sorted(__protobuf__.manifest))\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta3/__init__.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/__init__.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/__init__.py\nindex d66d7b53db..845bf4d4da 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/__init__.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/__init__.py\n@@ -20,8 +20,6 @@ __version__ = package_version.__version__\n \n from .services.cloud_tasks import CloudTasksAsyncClient, CloudTasksClient\n from .types.cloudtasks import (\n-    BufferTaskRequest,\n-    BufferTaskResponse,\n     CreateQueueRequest,\n     CreateTaskRequest,\n     DeleteQueueRequest,\n@@ -67,8 +65,6 @@ __all__ = (\n     \"AppEngineHttpRequest\",\n     \"AppEngineRouting\",\n     \"Attempt\",\n-    \"BufferTaskRequest\",\n-    \"BufferTaskResponse\",\n     \"CloudTasksClient\",\n     \"CreateQueueRequest\",\n     \"CreateTaskRequest\",\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta3/gapic_version.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/gapic_version.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/gapic_version.py\nindex 209de14827..360a0d13eb 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/gapic_version.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/gapic_version.py\n@@ -13,4 +13,4 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n #\n-__version__ = \"2.15.0\"  # {x-release-please-version}\n+__version__ = \"0.0.0\"  # {x-release-please-version}\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/async_client.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/async_client.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/async_client.py\nindex e11c4435df..031628830b 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/async_client.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/async_client.py\n@@ -42,7 +42,6 @@ try:\n except AttributeError:  # pragma: NO COVER\n     OptionalRetry = Union[retries.AsyncRetry, object]  # type: ignore\n \n-from google.api import httpbody_pb2  # type: ignore\n from google.cloud.location import locations_pb2  # type: ignore\n from google.iam.v1 import iam_policy_pb2  # type: ignore\n from google.iam.v1 import policy_pb2  # type: ignore\n@@ -2262,149 +2261,6 @@ class CloudTasksAsyncClient:\n         # Done; return the response.\n         return response\n \n-    async def buffer_task(\n-        self,\n-        request: Optional[Union[cloudtasks.BufferTaskRequest, dict]] = None,\n-        *,\n-        queue: Optional[str] = None,\n-        task_id: Optional[str] = None,\n-        body: Optional[httpbody_pb2.HttpBody] = None,\n-        retry: OptionalRetry = gapic_v1.method.DEFAULT,\n-        timeout: Union[float, object] = gapic_v1.method.DEFAULT,\n-        metadata: Sequence[Tuple[str, str]] = (),\n-    ) -> cloudtasks.BufferTaskResponse:\n-        r\"\"\"Creates and buffers a new task without the need to explicitly\n-        define a Task message. The queue must have [HTTP\n-        target][google.cloud.tasks.v2beta3.HttpTarget]. To create the\n-        task with a custom ID, use the following format and set TASK_ID\n-        to your desired ID:\n-        projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID/tasks/TASK_ID:buffer\n-        To create the task with an automatically generated ID, use the\n-        following format:\n-        projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID/tasks:buffer.\n-        Note: This feature is in its experimental stage. You must\n-        request access to the API through the `Cloud Tasks BufferTask\n-        Experiment Signup form <https://forms.gle/X8Zr5hiXH5tTGFqh8>`__.\n-\n-        .. code-block:: python\n-\n-            # This snippet has been automatically generated and should be regarded as a\n-            # code template only.\n-            # It will require modifications to work:\n-            # - It may require correct/in-range values for request initialization.\n-            # - It may require specifying regional endpoints when creating the service\n-            #   client as shown in:\n-            #   https://googleapis.dev/python/google-api-core/latest/client_options.html\n-            from google.cloud import tasks_v2beta3\n-\n-            async def sample_buffer_task():\n-                # Create a client\n-                client = tasks_v2beta3.CloudTasksAsyncClient()\n-\n-                # Initialize request argument(s)\n-                request = tasks_v2beta3.BufferTaskRequest(\n-                    queue=\"queue_value\",\n-                )\n-\n-                # Make the request\n-                response = await client.buffer_task(request=request)\n-\n-                # Handle the response\n-                print(response)\n-\n-        Args:\n-            request (Optional[Union[google.cloud.tasks_v2beta3.types.BufferTaskRequest, dict]]):\n-                The request object. Request message for\n-                [BufferTask][google.cloud.tasks.v2beta3.CloudTasks.BufferTask].\n-            queue (:class:`str`):\n-                Required. The parent queue name. For example:\n-                projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID\\`\n-\n-                The queue must already exist.\n-\n-                This corresponds to the ``queue`` field\n-                on the ``request`` instance; if ``request`` is provided, this\n-                should not be set.\n-            task_id (:class:`str`):\n-                Optional. Task ID for the task being\n-                created. If not provided, a random task\n-                ID is assigned to the task.\n-\n-                This corresponds to the ``task_id`` field\n-                on the ``request`` instance; if ``request`` is provided, this\n-                should not be set.\n-            body (:class:`google.api.httpbody_pb2.HttpBody`):\n-                Optional. Body of the HTTP request.\n-\n-                The body can take any generic value. The value is\n-                written to the [HttpRequest][payload] of the [Task].\n-\n-                This corresponds to the ``body`` field\n-                on the ``request`` instance; if ``request`` is provided, this\n-                should not be set.\n-            retry (google.api_core.retry_async.AsyncRetry): Designation of what errors, if any,\n-                should be retried.\n-            timeout (float): The timeout for this request.\n-            metadata (Sequence[Tuple[str, str]]): Strings which should be\n-                sent along with the request as metadata.\n-\n-        Returns:\n-            google.cloud.tasks_v2beta3.types.BufferTaskResponse:\n-                Response message for\n-                   [BufferTask][google.cloud.tasks.v2beta3.CloudTasks.BufferTask].\n-\n-        \"\"\"\n-        # Create or coerce a protobuf request object.\n-        # Quick check: If we got a request object, we should *not* have\n-        # gotten any keyword arguments that map to the request.\n-        has_flattened_params = any([queue, task_id, body])\n-        if request is not None and has_flattened_params:\n-            raise ValueError(\n-                \"If the `request` argument is set, then none of \"\n-                \"the individual field arguments should be set.\"\n-            )\n-\n-        request = cloudtasks.BufferTaskRequest(request)\n-\n-        # If we have keyword arguments corresponding to fields on the\n-        # request, apply these.\n-        if queue is not None:\n-            request.queue = queue\n-        if task_id is not None:\n-            request.task_id = task_id\n-        if body is not None:\n-            request.body = body\n-\n-        # Wrap the RPC method; this adds retry and timeout information,\n-        # and friendly error handling.\n-        rpc = gapic_v1.method_async.wrap_method(\n-            self._client._transport.buffer_task,\n-            default_timeout=20.0,\n-            client_info=DEFAULT_CLIENT_INFO,\n-        )\n-\n-        # Certain fields should be provided within the metadata header;\n-        # add these here.\n-        metadata = tuple(metadata) + (\n-            gapic_v1.routing_header.to_grpc_metadata(\n-                (\n-                    (\"queue\", request.queue),\n-                    (\"task_id\", request.task_id),\n-                )\n-            ),\n-        )\n-\n-        # Send the request.\n-        response = await rpc(\n-            request,\n-            retry=retry,\n-            timeout=timeout,\n-            metadata=metadata,\n-        )\n-\n-        # Done; return the response.\n-        return response\n-\n     async def get_location(\n         self,\n         request: Optional[locations_pb2.GetLocationRequest] = None,\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/client.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/client.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/client.py\nindex 568dfe69a3..9322c353bf 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/client.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/client.py\n@@ -46,7 +46,6 @@ try:\n except AttributeError:  # pragma: NO COVER\n     OptionalRetry = Union[retries.Retry, object]  # type: ignore\n \n-from google.api import httpbody_pb2  # type: ignore\n from google.cloud.location import locations_pb2  # type: ignore\n from google.iam.v1 import iam_policy_pb2  # type: ignore\n from google.iam.v1 import policy_pb2  # type: ignore\n@@ -2429,149 +2428,6 @@ class CloudTasksClient(metaclass=CloudTasksClientMeta):\n         # Done; return the response.\n         return response\n \n-    def buffer_task(\n-        self,\n-        request: Optional[Union[cloudtasks.BufferTaskRequest, dict]] = None,\n-        *,\n-        queue: Optional[str] = None,\n-        task_id: Optional[str] = None,\n-        body: Optional[httpbody_pb2.HttpBody] = None,\n-        retry: OptionalRetry = gapic_v1.method.DEFAULT,\n-        timeout: Union[float, object] = gapic_v1.method.DEFAULT,\n-        metadata: Sequence[Tuple[str, str]] = (),\n-    ) -> cloudtasks.BufferTaskResponse:\n-        r\"\"\"Creates and buffers a new task without the need to explicitly\n-        define a Task message. The queue must have [HTTP\n-        target][google.cloud.tasks.v2beta3.HttpTarget]. To create the\n-        task with a custom ID, use the following format and set TASK_ID\n-        to your desired ID:\n-        projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID/tasks/TASK_ID:buffer\n-        To create the task with an automatically generated ID, use the\n-        following format:\n-        projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID/tasks:buffer.\n-        Note: This feature is in its experimental stage. You must\n-        request access to the API through the `Cloud Tasks BufferTask\n-        Experiment Signup form <https://forms.gle/X8Zr5hiXH5tTGFqh8>`__.\n-\n-        .. code-block:: python\n-\n-            # This snippet has been automatically generated and should be regarded as a\n-            # code template only.\n-            # It will require modifications to work:\n-            # - It may require correct/in-range values for request initialization.\n-            # - It may require specifying regional endpoints when creating the service\n-            #   client as shown in:\n-            #   https://googleapis.dev/python/google-api-core/latest/client_options.html\n-            from google.cloud import tasks_v2beta3\n-\n-            def sample_buffer_task():\n-                # Create a client\n-                client = tasks_v2beta3.CloudTasksClient()\n-\n-                # Initialize request argument(s)\n-                request = tasks_v2beta3.BufferTaskRequest(\n-                    queue=\"queue_value\",\n-                )\n-\n-                # Make the request\n-                response = client.buffer_task(request=request)\n-\n-                # Handle the response\n-                print(response)\n-\n-        Args:\n-            request (Union[google.cloud.tasks_v2beta3.types.BufferTaskRequest, dict]):\n-                The request object. Request message for\n-                [BufferTask][google.cloud.tasks.v2beta3.CloudTasks.BufferTask].\n-            queue (str):\n-                Required. The parent queue name. For example:\n-                projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID\\`\n-\n-                The queue must already exist.\n-\n-                This corresponds to the ``queue`` field\n-                on the ``request`` instance; if ``request`` is provided, this\n-                should not be set.\n-            task_id (str):\n-                Optional. Task ID for the task being\n-                created. If not provided, a random task\n-                ID is assigned to the task.\n-\n-                This corresponds to the ``task_id`` field\n-                on the ``request`` instance; if ``request`` is provided, this\n-                should not be set.\n-            body (google.api.httpbody_pb2.HttpBody):\n-                Optional. Body of the HTTP request.\n-\n-                The body can take any generic value. The value is\n-                written to the [HttpRequest][payload] of the [Task].\n-\n-                This corresponds to the ``body`` field\n-                on the ``request`` instance; if ``request`` is provided, this\n-                should not be set.\n-            retry (google.api_core.retry.Retry): Designation of what errors, if any,\n-                should be retried.\n-            timeout (float): The timeout for this request.\n-            metadata (Sequence[Tuple[str, str]]): Strings which should be\n-                sent along with the request as metadata.\n-\n-        Returns:\n-            google.cloud.tasks_v2beta3.types.BufferTaskResponse:\n-                Response message for\n-                   [BufferTask][google.cloud.tasks.v2beta3.CloudTasks.BufferTask].\n-\n-        \"\"\"\n-        # Create or coerce a protobuf request object.\n-        # Quick check: If we got a request object, we should *not* have\n-        # gotten any keyword arguments that map to the request.\n-        has_flattened_params = any([queue, task_id, body])\n-        if request is not None and has_flattened_params:\n-            raise ValueError(\n-                \"If the `request` argument is set, then none of \"\n-                \"the individual field arguments should be set.\"\n-            )\n-\n-        # Minor optimization to avoid making a copy if the user passes\n-        # in a cloudtasks.BufferTaskRequest.\n-        # There's no risk of modifying the input as we've already verified\n-        # there are no flattened fields.\n-        if not isinstance(request, cloudtasks.BufferTaskRequest):\n-            request = cloudtasks.BufferTaskRequest(request)\n-            # If we have keyword arguments corresponding to fields on the\n-            # request, apply these.\n-            if queue is not None:\n-                request.queue = queue\n-            if task_id is not None:\n-                request.task_id = task_id\n-            if body is not None:\n-                request.body = body\n-\n-        # Wrap the RPC method; this adds retry and timeout information,\n-        # and friendly error handling.\n-        rpc = self._transport._wrapped_methods[self._transport.buffer_task]\n-\n-        # Certain fields should be provided within the metadata header;\n-        # add these here.\n-        metadata = tuple(metadata) + (\n-            gapic_v1.routing_header.to_grpc_metadata(\n-                (\n-                    (\"queue\", request.queue),\n-                    (\"task_id\", request.task_id),\n-                )\n-            ),\n-        )\n-\n-        # Send the request.\n-        response = rpc(\n-            request,\n-            retry=retry,\n-            timeout=timeout,\n-            metadata=metadata,\n-        )\n-\n-        # Done; return the response.\n-        return response\n-\n     def __enter__(self) -> \"CloudTasksClient\":\n         return self\n \n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/base.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/base.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/base.py\nindex cd7b0f657c..bbac835d46 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/base.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/base.py\n@@ -290,11 +290,6 @@ class CloudTasksTransport(abc.ABC):\n                 default_timeout=20.0,\n                 client_info=client_info,\n             ),\n-            self.buffer_task: gapic_v1.method.wrap_method(\n-                self.buffer_task,\n-                default_timeout=20.0,\n-                client_info=client_info,\n-            ),\n         }\n \n     def close(self):\n@@ -442,15 +437,6 @@ class CloudTasksTransport(abc.ABC):\n     ) -> Callable[[cloudtasks.RunTaskRequest], Union[task.Task, Awaitable[task.Task]]]:\n         raise NotImplementedError()\n \n-    @property\n-    def buffer_task(\n-        self,\n-    ) -> Callable[\n-        [cloudtasks.BufferTaskRequest],\n-        Union[cloudtasks.BufferTaskResponse, Awaitable[cloudtasks.BufferTaskResponse]],\n-    ]:\n-        raise NotImplementedError()\n-\n     @property\n     def get_location(\n         self,\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/grpc.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/grpc.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/grpc.py\nindex 22ae3cf0f0..09c8e501af 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/grpc.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/grpc.py\n@@ -777,43 +777,6 @@ class CloudTasksGrpcTransport(CloudTasksTransport):\n             )\n         return self._stubs[\"run_task\"]\n \n-    @property\n-    def buffer_task(\n-        self,\n-    ) -> Callable[[cloudtasks.BufferTaskRequest], cloudtasks.BufferTaskResponse]:\n-        r\"\"\"Return a callable for the buffer task method over gRPC.\n-\n-        Creates and buffers a new task without the need to explicitly\n-        define a Task message. The queue must have [HTTP\n-        target][google.cloud.tasks.v2beta3.HttpTarget]. To create the\n-        task with a custom ID, use the following format and set TASK_ID\n-        to your desired ID:\n-        projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID/tasks/TASK_ID:buffer\n-        To create the task with an automatically generated ID, use the\n-        following format:\n-        projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID/tasks:buffer.\n-        Note: This feature is in its experimental stage. You must\n-        request access to the API through the `Cloud Tasks BufferTask\n-        Experiment Signup form <https://forms.gle/X8Zr5hiXH5tTGFqh8>`__.\n-\n-        Returns:\n-            Callable[[~.BufferTaskRequest],\n-                    ~.BufferTaskResponse]:\n-                A function that, when called, will call the underlying RPC\n-                on the server.\n-        \"\"\"\n-        # Generate a \"stub function\" on-the-fly which will actually make\n-        # the request.\n-        # gRPC handles serialization and deserialization, so we just need\n-        # to pass in the functions for each.\n-        if \"buffer_task\" not in self._stubs:\n-            self._stubs[\"buffer_task\"] = self.grpc_channel.unary_unary(\n-                \"/google.cloud.tasks.v2beta3.CloudTasks/BufferTask\",\n-                request_serializer=cloudtasks.BufferTaskRequest.serialize,\n-                response_deserializer=cloudtasks.BufferTaskResponse.deserialize,\n-            )\n-        return self._stubs[\"buffer_task\"]\n-\n     def close(self):\n         self.grpc_channel.close()\n \n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/grpc_asyncio.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/grpc_asyncio.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/grpc_asyncio.py\nindex c138c66ec8..21444c26a6 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/grpc_asyncio.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/grpc_asyncio.py\n@@ -796,45 +796,6 @@ class CloudTasksGrpcAsyncIOTransport(CloudTasksTransport):\n             )\n         return self._stubs[\"run_task\"]\n \n-    @property\n-    def buffer_task(\n-        self,\n-    ) -> Callable[\n-        [cloudtasks.BufferTaskRequest], Awaitable[cloudtasks.BufferTaskResponse]\n-    ]:\n-        r\"\"\"Return a callable for the buffer task method over gRPC.\n-\n-        Creates and buffers a new task without the need to explicitly\n-        define a Task message. The queue must have [HTTP\n-        target][google.cloud.tasks.v2beta3.HttpTarget]. To create the\n-        task with a custom ID, use the following format and set TASK_ID\n-        to your desired ID:\n-        projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID/tasks/TASK_ID:buffer\n-        To create the task with an automatically generated ID, use the\n-        following format:\n-        projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID/tasks:buffer.\n-        Note: This feature is in its experimental stage. You must\n-        request access to the API through the `Cloud Tasks BufferTask\n-        Experiment Signup form <https://forms.gle/X8Zr5hiXH5tTGFqh8>`__.\n-\n-        Returns:\n-            Callable[[~.BufferTaskRequest],\n-                    Awaitable[~.BufferTaskResponse]]:\n-                A function that, when called, will call the underlying RPC\n-                on the server.\n-        \"\"\"\n-        # Generate a \"stub function\" on-the-fly which will actually make\n-        # the request.\n-        # gRPC handles serialization and deserialization, so we just need\n-        # to pass in the functions for each.\n-        if \"buffer_task\" not in self._stubs:\n-            self._stubs[\"buffer_task\"] = self.grpc_channel.unary_unary(\n-                \"/google.cloud.tasks.v2beta3.CloudTasks/BufferTask\",\n-                request_serializer=cloudtasks.BufferTaskRequest.serialize,\n-                response_deserializer=cloudtasks.BufferTaskResponse.deserialize,\n-            )\n-        return self._stubs[\"buffer_task\"]\n-\n     def close(self):\n         return self.grpc_channel.close()\n \n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/rest.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/rest.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/rest.py\nindex ef95cfc634..c20e5e93f9 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/rest.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/services/cloud_tasks/transports/rest.py\n@@ -72,14 +72,6 @@ class CloudTasksRestInterceptor:\n \n     .. code-block:: python\n         class MyCustomCloudTasksInterceptor(CloudTasksRestInterceptor):\n-            def pre_buffer_task(self, request, metadata):\n-                logging.log(f\"Received request: {request}\")\n-                return request, metadata\n-\n-            def post_buffer_task(self, response):\n-                logging.log(f\"Received response: {response}\")\n-                return response\n-\n             def pre_create_queue(self, request, metadata):\n                 logging.log(f\"Received request: {request}\")\n                 return request, metadata\n@@ -206,27 +198,6 @@ class CloudTasksRestInterceptor:\n \n     \"\"\"\n \n-    def pre_buffer_task(\n-        self, request: cloudtasks.BufferTaskRequest, metadata: Sequence[Tuple[str, str]]\n-    ) -> Tuple[cloudtasks.BufferTaskRequest, Sequence[Tuple[str, str]]]:\n-        \"\"\"Pre-rpc interceptor for buffer_task\n-\n-        Override in a subclass to manipulate the request or metadata\n-        before they are sent to the CloudTasks server.\n-        \"\"\"\n-        return request, metadata\n-\n-    def post_buffer_task(\n-        self, response: cloudtasks.BufferTaskResponse\n-    ) -> cloudtasks.BufferTaskResponse:\n-        \"\"\"Post-rpc interceptor for buffer_task\n-\n-        Override in a subclass to manipulate the response\n-        after it is returned by the CloudTasks server but before\n-        it is returned to user code.\n-        \"\"\"\n-        return response\n-\n     def pre_create_queue(\n         self,\n         request: cloudtasks.CreateQueueRequest,\n@@ -677,104 +648,6 @@ class CloudTasksRestTransport(CloudTasksTransport):\n         self._interceptor = interceptor or CloudTasksRestInterceptor()\n         self._prep_wrapped_messages(client_info)\n \n-    class _BufferTask(CloudTasksRestStub):\n-        def __hash__(self):\n-            return hash(\"BufferTask\")\n-\n-        __REQUIRED_FIELDS_DEFAULT_VALUES: Dict[str, Any] = {}\n-\n-        @classmethod\n-        def _get_unset_required_fields(cls, message_dict):\n-            return {\n-                k: v\n-                for k, v in cls.__REQUIRED_FIELDS_DEFAULT_VALUES.items()\n-                if k not in message_dict\n-            }\n-\n-        def __call__(\n-            self,\n-            request: cloudtasks.BufferTaskRequest,\n-            *,\n-            retry: OptionalRetry = gapic_v1.method.DEFAULT,\n-            timeout: Optional[float] = None,\n-            metadata: Sequence[Tuple[str, str]] = (),\n-        ) -> cloudtasks.BufferTaskResponse:\n-            r\"\"\"Call the buffer task method over HTTP.\n-\n-            Args:\n-                request (~.cloudtasks.BufferTaskRequest):\n-                    The request object. Request message for\n-                [BufferTask][google.cloud.tasks.v2beta3.CloudTasks.BufferTask].\n-                retry (google.api_core.retry.Retry): Designation of what errors, if any,\n-                    should be retried.\n-                timeout (float): The timeout for this request.\n-                metadata (Sequence[Tuple[str, str]]): Strings which should be\n-                    sent along with the request as metadata.\n-\n-            Returns:\n-                ~.cloudtasks.BufferTaskResponse:\n-                    Response message for\n-                [BufferTask][google.cloud.tasks.v2beta3.CloudTasks.BufferTask].\n-\n-            \"\"\"\n-\n-            http_options: List[Dict[str, str]] = [\n-                {\n-                    \"method\": \"post\",\n-                    \"uri\": \"/v2beta3/{queue=projects/*/locations/*/queues/*}/tasks/{task_id}:buffer\",\n-                    \"body\": \"*\",\n-                },\n-            ]\n-            request, metadata = self._interceptor.pre_buffer_task(request, metadata)\n-            pb_request = cloudtasks.BufferTaskRequest.pb(request)\n-            transcoded_request = path_template.transcode(http_options, pb_request)\n-\n-            # Jsonify the request body\n-\n-            body = json_format.MessageToJson(\n-                transcoded_request[\"body\"],\n-                including_default_value_fields=False,\n-                use_integers_for_enums=True,\n-            )\n-            uri = transcoded_request[\"uri\"]\n-            method = transcoded_request[\"method\"]\n-\n-            # Jsonify the query params\n-            query_params = json.loads(\n-                json_format.MessageToJson(\n-                    transcoded_request[\"query_params\"],\n-                    including_default_value_fields=False,\n-                    use_integers_for_enums=True,\n-                )\n-            )\n-            query_params.update(self._get_unset_required_fields(query_params))\n-\n-            query_params[\"$alt\"] = \"json;enum-encoding=int\"\n-\n-            # Send the request\n-            headers = dict(metadata)\n-            headers[\"Content-Type\"] = \"application/json\"\n-            response = getattr(self._session, method)(\n-                \"{host}{uri}\".format(host=self._host, uri=uri),\n-                timeout=timeout,\n-                headers=headers,\n-                params=rest_helpers.flatten_query_params(query_params, strict=True),\n-                data=body,\n-            )\n-\n-            # In case of error, raise the appropriate core_exceptions.GoogleAPICallError exception\n-            # subclass.\n-            if response.status_code >= 400:\n-                raise core_exceptions.from_http_response(response)\n-\n-            # Return the response\n-            resp = cloudtasks.BufferTaskResponse()\n-            pb_resp = cloudtasks.BufferTaskResponse.pb(resp)\n-\n-            json_format.Parse(response.content, pb_resp, ignore_unknown_fields=True)\n-            resp = self._interceptor.post_buffer_task(resp)\n-            return resp\n-\n     class _CreateQueue(CloudTasksRestStub):\n         def __hash__(self):\n             return hash(\"CreateQueue\")\n@@ -2422,14 +2295,6 @@ class CloudTasksRestTransport(CloudTasksTransport):\n             resp = self._interceptor.post_update_queue(resp)\n             return resp\n \n-    @property\n-    def buffer_task(\n-        self,\n-    ) -> Callable[[cloudtasks.BufferTaskRequest], cloudtasks.BufferTaskResponse]:\n-        # The return type is fine, but mypy isn't sophisticated enough to determine what's going on here.\n-        # In C++ this would require a dynamic_cast\n-        return self._BufferTask(self._session, self._host, self._interceptor)  # type: ignore\n-\n     @property\n     def create_queue(\n         self,\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta3/types/__init__.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/types/__init__.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/types/__init__.py\nindex 77d5ff35fb..119581334c 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/types/__init__.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/types/__init__.py\n@@ -14,8 +14,6 @@\n # limitations under the License.\n #\n from .cloudtasks import (\n-    BufferTaskRequest,\n-    BufferTaskResponse,\n     CreateQueueRequest,\n     CreateTaskRequest,\n     DeleteQueueRequest,\n@@ -50,8 +48,6 @@ from .target import (\n from .task import Attempt, Task\n \n __all__ = (\n-    \"BufferTaskRequest\",\n-    \"BufferTaskResponse\",\n     \"CreateQueueRequest\",\n     \"CreateTaskRequest\",\n     \"DeleteQueueRequest\",\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/google/cloud/tasks_v2beta3/types/cloudtasks.py",
            "diff": "diff --git a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/types/cloudtasks.py b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/types/cloudtasks.py\nindex 04169d15e9..6fe514acde 100644\n--- a/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/types/cloudtasks.py\n+++ b/packages/google-cloud-tasks/google/cloud/tasks_v2beta3/types/cloudtasks.py\n@@ -17,7 +17,6 @@ from __future__ import annotations\n \n from typing import MutableMapping, MutableSequence\n \n-from google.api import httpbody_pb2  # type: ignore\n from google.protobuf import field_mask_pb2  # type: ignore\n import proto  # type: ignore\n \n@@ -42,8 +41,6 @@ __protobuf__ = proto.module(\n         \"CreateTaskRequest\",\n         \"DeleteTaskRequest\",\n         \"RunTaskRequest\",\n-        \"BufferTaskRequest\",\n-        \"BufferTaskResponse\",\n     },\n )\n \n@@ -582,56 +579,4 @@ class RunTaskRequest(proto.Message):\n     )\n \n \n-class BufferTaskRequest(proto.Message):\n-    r\"\"\"Request message for\n-    [BufferTask][google.cloud.tasks.v2beta3.CloudTasks.BufferTask].\n-\n-    Attributes:\n-        queue (str):\n-            Required. The parent queue name. For example:\n-            projects/PROJECT_ID/locations/LOCATION_ID/queues/QUEUE_ID\\`\n-\n-            The queue must already exist.\n-        task_id (str):\n-            Optional. Task ID for the task being created.\n-            If not provided, a random task ID is assigned to\n-            the task.\n-        body (google.api.httpbody_pb2.HttpBody):\n-            Optional. Body of the HTTP request.\n-\n-            The body can take any generic value. The value is written to\n-            the [HttpRequest][payload] of the [Task].\n-    \"\"\"\n-\n-    queue: str = proto.Field(\n-        proto.STRING,\n-        number=1,\n-    )\n-    task_id: str = proto.Field(\n-        proto.STRING,\n-        number=2,\n-    )\n-    body: httpbody_pb2.HttpBody = proto.Field(\n-        proto.MESSAGE,\n-        number=3,\n-        message=httpbody_pb2.HttpBody,\n-    )\n-\n-\n-class BufferTaskResponse(proto.Message):\n-    r\"\"\"Response message for\n-    [BufferTask][google.cloud.tasks.v2beta3.CloudTasks.BufferTask].\n-\n-    Attributes:\n-        task (google.cloud.tasks_v2beta3.types.Task):\n-            The created task.\n-    \"\"\"\n-\n-    task: gct_task.Task = proto.Field(\n-        proto.MESSAGE,\n-        number=1,\n-        message=gct_task.Task,\n-    )\n-\n-\n __all__ = tuple(sorted(__protobuf__.manifest))\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/noxfile.py",
            "diff": "diff --git a/packages/google-cloud-tasks/noxfile.py b/packages/google-cloud-tasks/noxfile.py\nindex 7d3551347c..1e6cd48d05 100644\n--- a/packages/google-cloud-tasks/noxfile.py\n+++ b/packages/google-cloud-tasks/noxfile.py\n@@ -282,6 +282,15 @@ def docs(session):\n \n     session.install(\"-e\", \".\")\n     session.install(\n+        # We need to pin to specific versions of the `sphinxcontrib-*` packages\n+        # which still support sphinx 4.x.\n+        # See https://github.com/googleapis/sphinx-docfx-yaml/issues/344\n+        # and https://github.com/googleapis/sphinx-docfx-yaml/issues/345.\n+        \"sphinxcontrib-applehelp==1.0.4\",\n+        \"sphinxcontrib-devhelp==1.0.2\",\n+        \"sphinxcontrib-htmlhelp==2.0.1\",\n+        \"sphinxcontrib-qthelp==1.0.3\",\n+        \"sphinxcontrib-serializinghtml==1.1.5\",\n         \"sphinx==4.5.0\",\n         \"alabaster\",\n         \"recommonmark\",\n@@ -308,6 +317,15 @@ def docfx(session):\n \n     session.install(\"-e\", \".\")\n     session.install(\n+        # We need to pin to specific versions of the `sphinxcontrib-*` packages\n+        # which still support sphinx 4.x.\n+        # See https://github.com/googleapis/sphinx-docfx-yaml/issues/344\n+        # and https://github.com/googleapis/sphinx-docfx-yaml/issues/345.\n+        \"sphinxcontrib-applehelp==1.0.4\",\n+        \"sphinxcontrib-devhelp==1.0.2\",\n+        \"sphinxcontrib-htmlhelp==2.0.1\",\n+        \"sphinxcontrib-qthelp==1.0.3\",\n+        \"sphinxcontrib-serializinghtml==1.1.5\",\n         \"gcp-sphinx-docfx-yaml\",\n         \"alabaster\",\n         \"recommonmark\",\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/samples/generated_samples/cloudtasks_v2beta2_generated_cloud_tasks_buffer_task_async.py",
            "diff": "diff --git a/packages/google-cloud-tasks/samples/generated_samples/cloudtasks_v2beta2_generated_cloud_tasks_buffer_task_async.py b/packages/google-cloud-tasks/samples/generated_samples/cloudtasks_v2beta2_generated_cloud_tasks_buffer_task_async.py\ndeleted file mode 100644\nindex 1c86ed30f6..0000000000\n--- a/packages/google-cloud-tasks/samples/generated_samples/cloudtasks_v2beta2_generated_cloud_tasks_buffer_task_async.py\n+++ /dev/null\n@@ -1,52 +0,0 @@\n-# -*- coding: utf-8 -*-\n-# Copyright 2023 Google LLC\n-#\n-# Licensed under the Apache License, Version 2.0 (the \"License\");\n-# you may not use this file except in compliance with the License.\n-# You may obtain a copy of the License at\n-#\n-#     http://www.apache.org/licenses/LICENSE-2.0\n-#\n-# Unless required by applicable law or agreed to in writing, software\n-# distributed under the License is distributed on an \"AS IS\" BASIS,\n-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n-# See the License for the specific language governing permissions and\n-# limitations under the License.\n-#\n-# Generated code. DO NOT EDIT!\n-#\n-# Snippet for BufferTask\n-# NOTE: This snippet has been automatically generated for illustrative purposes only.\n-# It may require modifications to work in your environment.\n-\n-# To install the latest published package dependency, execute the following:\n-#   python3 -m pip install google-cloud-tasks\n-\n-\n-# [START cloudtasks_v2beta2_generated_CloudTasks_BufferTask_async]\n-# This snippet has been automatically generated and should be regarded as a\n-# code template only.\n-# It will require modifications to work:\n-# - It may require correct/in-range values for request initialization.\n-# - It may require specifying regional endpoints when creating the service\n-#   client as shown in:\n-#   https://googleapis.dev/python/google-api-core/latest/client_options.html\n-from google.cloud import tasks_v2beta2\n-\n-\n-async def sample_buffer_task():\n-    # Create a client\n-    client = tasks_v2beta2.CloudTasksAsyncClient()\n-\n-    # Initialize request argument(s)\n-    request = tasks_v2beta2.BufferTaskRequest(\n-        queue=\"queue_value\",\n-    )\n-\n-    # Make the request\n-    response = await client.buffer_task(request=request)\n-\n-    # Handle the response\n-    print(response)\n-\n-# [END cloudtasks_v2beta2_generated_CloudTasks_BufferTask_async]\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/samples/generated_samples/cloudtasks_v2beta2_generated_cloud_tasks_buffer_task_sync.py",
            "diff": "diff --git a/packages/google-cloud-tasks/samples/generated_samples/cloudtasks_v2beta2_generated_cloud_tasks_buffer_task_sync.py b/packages/google-cloud-tasks/samples/generated_samples/cloudtasks_v2beta2_generated_cloud_tasks_buffer_task_sync.py\ndeleted file mode 100644\nindex c6e104349b..0000000000\n--- a/packages/google-cloud-tasks/samples/generated_samples/cloudtasks_v2beta2_generated_cloud_tasks_buffer_task_sync.py\n+++ /dev/null\n@@ -1,52 +0,0 @@\n-# -*- coding: utf-8 -*-\n-# Copyright 2023 Google LLC\n-#\n-# Licensed under the Apache License, Version 2.0 (the \"License\");\n-# you may not use this file except in compliance with the License.\n-# You may obtain a copy of the License at\n-#\n-#     http://www.apache.org/licenses/LICENSE-2.0\n-#\n-# Unless required by applicable law or agreed to in writing, software\n-# distributed under the License is distributed on an \"AS IS\" BASIS,\n-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n-# See the License for the specific language governing permissions and\n-# limitations under the License.\n-#\n-# Generated code. DO NOT EDIT!\n-#\n-# Snippet for BufferTask\n-# NOTE: This snippet has been automatically generated for illustrative purposes only.\n-# It may require modifications to work in your environment.\n-\n-# To install the latest published package dependency, execute the following:\n-#   python3 -m pip install google-cloud-tasks\n-\n-\n-# [START cloudtasks_v2beta2_generated_CloudTasks_BufferTask_sync]\n-# This snippet has been automatically generated and should be regarded as a\n-# code template only.\n-# It will require modifications to work:\n-# - It may require correct/in-range values for request initialization.\n-# - It may require specifying regional endpoints when creating the service\n-#   client as shown in:\n-#   https://googleapis.dev/python/google-api-core/latest/client_options.html\n-from google.cloud import tasks_v2beta2\n-\n-\n-def sample_buffer_task():\n-    # Create a client\n-    client = tasks_v2beta2.CloudTasksClient()\n-\n-    # Initialize request argument(s)\n-    request = tasks_v2beta2.BufferTaskRequest(\n-        queue=\"queue_value\",\n-    )\n-\n-    # Make the request\n-    response = client.buffer_task(request=request)\n-\n-    # Handle the response\n-    print(response)\n-\n-# [END cloudtasks_v2beta2_generated_CloudTasks_BufferTask_sync]\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/samples/generated_samples/cloudtasks_v2beta3_generated_cloud_tasks_buffer_task_async.py",
            "diff": "diff --git a/packages/google-cloud-tasks/samples/generated_samples/cloudtasks_v2beta3_generated_cloud_tasks_buffer_task_async.py b/packages/google-cloud-tasks/samples/generated_samples/cloudtasks_v2beta3_generated_cloud_tasks_buffer_task_async.py\ndeleted file mode 100644\nindex 2b57ea3be0..0000000000\n--- a/packages/google-cloud-tasks/samples/generated_samples/cloudtasks_v2beta3_generated_cloud_tasks_buffer_task_async.py\n+++ /dev/null\n@@ -1,52 +0,0 @@\n-# -*- coding: utf-8 -*-\n-# Copyright 2023 Google LLC\n-#\n-# Licensed under the Apache License, Version 2.0 (the \"License\");\n-# you may not use this file except in compliance with the License.\n-# You may obtain a copy of the License at\n-#\n-#     http://www.apache.org/licenses/LICENSE-2.0\n-#\n-# Unless required by applicable law or agreed to in writing, software\n-# distributed under the License is distributed on an \"AS IS\" BASIS,\n-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n-# See the License for the specific language governing permissions and\n-# limitations under the License.\n-#\n-# Generated code. DO NOT EDIT!\n-#\n-# Snippet for BufferTask\n-# NOTE: This snippet has been automatically generated for illustrative purposes only.\n-# It may require modifications to work in your environment.\n-\n-# To install the latest published package dependency, execute the following:\n-#   python3 -m pip install google-cloud-tasks\n-\n-\n-# [START cloudtasks_v2beta3_generated_CloudTasks_BufferTask_async]\n-# This snippet has been automatically generated and should be regarded as a\n-# code template only.\n-# It will require modifications to work:\n-# - It may require correct/in-range values for request initialization.\n-# - It may require specifying regional endpoints when creating the service\n-#   client as shown in:\n-#   https://googleapis.dev/python/google-api-core/latest/client_options.html\n-from google.cloud import tasks_v2beta3\n-\n-\n-async def sample_buffer_task():\n-    # Create a client\n-    client = tasks_v2beta3.CloudTasksAsyncClient()\n-\n-    # Initialize request argument(s)\n-    request = tasks_v2beta3.BufferTaskRequest(\n-        queue=\"queue_value\",\n-    )\n-\n-    # Make the request\n-    response = await client.buffer_task(request=request)\n-\n-    # Handle the response\n-    print(response)\n-\n-# [END cloudtasks_v2beta3_generated_CloudTasks_BufferTask_async]\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/samples/generated_samples/cloudtasks_v2beta3_generated_cloud_tasks_buffer_task_sync.py",
            "diff": "diff --git a/packages/google-cloud-tasks/samples/generated_samples/cloudtasks_v2beta3_generated_cloud_tasks_buffer_task_sync.py b/packages/google-cloud-tasks/samples/generated_samples/cloudtasks_v2beta3_generated_cloud_tasks_buffer_task_sync.py\ndeleted file mode 100644\nindex 246b167a25..0000000000\n--- a/packages/google-cloud-tasks/samples/generated_samples/cloudtasks_v2beta3_generated_cloud_tasks_buffer_task_sync.py\n+++ /dev/null\n@@ -1,52 +0,0 @@\n-# -*- coding: utf-8 -*-\n-# Copyright 2023 Google LLC\n-#\n-# Licensed under the Apache License, Version 2.0 (the \"License\");\n-# you may not use this file except in compliance with the License.\n-# You may obtain a copy of the License at\n-#\n-#     http://www.apache.org/licenses/LICENSE-2.0\n-#\n-# Unless required by applicable law or agreed to in writing, software\n-# distributed under the License is distributed on an \"AS IS\" BASIS,\n-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n-# See the License for the specific language governing permissions and\n-# limitations under the License.\n-#\n-# Generated code. DO NOT EDIT!\n-#\n-# Snippet for BufferTask\n-# NOTE: This snippet has been automatically generated for illustrative purposes only.\n-# It may require modifications to work in your environment.\n-\n-# To install the latest published package dependency, execute the following:\n-#   python3 -m pip install google-cloud-tasks\n-\n-\n-# [START cloudtasks_v2beta3_generated_CloudTasks_BufferTask_sync]\n-# This snippet has been automatically generated and should be regarded as a\n-# code template only.\n-# It will require modifications to work:\n-# - It may require correct/in-range values for request initialization.\n-# - It may require specifying regional endpoints when creating the service\n-#   client as shown in:\n-#   https://googleapis.dev/python/google-api-core/latest/client_options.html\n-from google.cloud import tasks_v2beta3\n-\n-\n-def sample_buffer_task():\n-    # Create a client\n-    client = tasks_v2beta3.CloudTasksClient()\n-\n-    # Initialize request argument(s)\n-    request = tasks_v2beta3.BufferTaskRequest(\n-        queue=\"queue_value\",\n-    )\n-\n-    # Make the request\n-    response = client.buffer_task(request=request)\n-\n-    # Handle the response\n-    print(response)\n-\n-# [END cloudtasks_v2beta3_generated_CloudTasks_BufferTask_sync]\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/scripts/fixup_tasks_v2beta2_keywords.py",
            "diff": "diff --git a/packages/google-cloud-tasks/scripts/fixup_tasks_v2beta2_keywords.py b/packages/google-cloud-tasks/scripts/fixup_tasks_v2beta2_keywords.py\nindex a585e51b63..7f5ee1ba33 100644\n--- a/packages/google-cloud-tasks/scripts/fixup_tasks_v2beta2_keywords.py\n+++ b/packages/google-cloud-tasks/scripts/fixup_tasks_v2beta2_keywords.py\n@@ -40,7 +40,6 @@ class tasksCallTransformer(cst.CSTTransformer):\n     CTRL_PARAMS: Tuple[str] = ('retry', 'timeout', 'metadata')\n     METHOD_TO_PARAMS: Dict[str, Tuple[str]] = {\n         'acknowledge_task': ('name', 'schedule_time', ),\n-        'buffer_task': ('queue', 'task_id', 'body', ),\n         'cancel_lease': ('name', 'schedule_time', 'response_view', ),\n         'create_queue': ('parent', 'queue', ),\n         'create_task': ('parent', 'task', 'response_view', ),\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/scripts/fixup_tasks_v2beta3_keywords.py",
            "diff": "diff --git a/packages/google-cloud-tasks/scripts/fixup_tasks_v2beta3_keywords.py b/packages/google-cloud-tasks/scripts/fixup_tasks_v2beta3_keywords.py\nindex d08dd32eaa..815c58e3be 100644\n--- a/packages/google-cloud-tasks/scripts/fixup_tasks_v2beta3_keywords.py\n+++ b/packages/google-cloud-tasks/scripts/fixup_tasks_v2beta3_keywords.py\n@@ -39,7 +39,6 @@ def partition(\n class tasksCallTransformer(cst.CSTTransformer):\n     CTRL_PARAMS: Tuple[str] = ('retry', 'timeout', 'metadata')\n     METHOD_TO_PARAMS: Dict[str, Tuple[str]] = {\n-        'buffer_task': ('queue', 'task_id', 'body', ),\n         'create_queue': ('parent', 'queue', ),\n         'create_task': ('parent', 'task', 'response_view', ),\n         'delete_queue': ('name', ),\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/tests/unit/gapic/tasks_v2beta2/test_cloud_tasks.py",
            "diff": "diff --git a/packages/google-cloud-tasks/tests/unit/gapic/tasks_v2beta2/test_cloud_tasks.py b/packages/google-cloud-tasks/tests/unit/gapic/tasks_v2beta2/test_cloud_tasks.py\nindex 372d7d7538..985f195395 100644\n--- a/packages/google-cloud-tasks/tests/unit/gapic/tasks_v2beta2/test_cloud_tasks.py\n+++ b/packages/google-cloud-tasks/tests/unit/gapic/tasks_v2beta2/test_cloud_tasks.py\n@@ -5919,254 +5919,6 @@ async def test_run_task_flattened_error_async():\n         )\n \n \n-@pytest.mark.parametrize(\n-    \"request_type\",\n-    [\n-        cloudtasks.BufferTaskRequest,\n-        dict,\n-    ],\n-)\n-def test_buffer_task(request_type, transport: str = \"grpc\"):\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        transport=transport,\n-    )\n-\n-    # Everything is optional in proto3 as far as the runtime is concerned,\n-    # and we are mocking out the actual API, so just send an empty request.\n-    request = request_type()\n-\n-    # Mock the actual call within the gRPC stub, and fake the request.\n-    with mock.patch.object(type(client.transport.buffer_task), \"__call__\") as call:\n-        # Designate an appropriate return value for the call.\n-        call.return_value = cloudtasks.BufferTaskResponse()\n-        response = client.buffer_task(request)\n-\n-        # Establish that the underlying gRPC stub method was called.\n-        assert len(call.mock_calls) == 1\n-        _, args, _ = call.mock_calls[0]\n-        assert args[0] == cloudtasks.BufferTaskRequest()\n-\n-    # Establish that the response is the type that we expect.\n-    assert isinstance(response, cloudtasks.BufferTaskResponse)\n-\n-\n-def test_buffer_task_empty_call():\n-    # This test is a coverage failsafe to make sure that totally empty calls,\n-    # i.e. request == None and no flattened fields passed, work.\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        transport=\"grpc\",\n-    )\n-\n-    # Mock the actual call within the gRPC stub, and fake the request.\n-    with mock.patch.object(type(client.transport.buffer_task), \"__call__\") as call:\n-        client.buffer_task()\n-        call.assert_called()\n-        _, args, _ = call.mock_calls[0]\n-        assert args[0] == cloudtasks.BufferTaskRequest()\n-\n-\n-@pytest.mark.asyncio\n-async def test_buffer_task_async(\n-    transport: str = \"grpc_asyncio\", request_type=cloudtasks.BufferTaskRequest\n-):\n-    client = CloudTasksAsyncClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        transport=transport,\n-    )\n-\n-    # Everything is optional in proto3 as far as the runtime is concerned,\n-    # and we are mocking out the actual API, so just send an empty request.\n-    request = request_type()\n-\n-    # Mock the actual call within the gRPC stub, and fake the request.\n-    with mock.patch.object(type(client.transport.buffer_task), \"__call__\") as call:\n-        # Designate an appropriate return value for the call.\n-        call.return_value = grpc_helpers_async.FakeUnaryUnaryCall(\n-            cloudtasks.BufferTaskResponse()\n-        )\n-        response = await client.buffer_task(request)\n-\n-        # Establish that the underlying gRPC stub method was called.\n-        assert len(call.mock_calls)\n-        _, args, _ = call.mock_calls[0]\n-        assert args[0] == cloudtasks.BufferTaskRequest()\n-\n-    # Establish that the response is the type that we expect.\n-    assert isinstance(response, cloudtasks.BufferTaskResponse)\n-\n-\n-@pytest.mark.asyncio\n-async def test_buffer_task_async_from_dict():\n-    await test_buffer_task_async(request_type=dict)\n-\n-\n-def test_buffer_task_field_headers():\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-    )\n-\n-    # Any value that is part of the HTTP/1.1 URI should be sent as\n-    # a field header. Set these to a non-empty value.\n-    request = cloudtasks.BufferTaskRequest()\n-\n-    request.queue = \"queue_value\"\n-    request.task_id = \"task_id_value\"\n-\n-    # Mock the actual call within the gRPC stub, and fake the request.\n-    with mock.patch.object(type(client.transport.buffer_task), \"__call__\") as call:\n-        call.return_value = cloudtasks.BufferTaskResponse()\n-        client.buffer_task(request)\n-\n-        # Establish that the underlying gRPC stub method was called.\n-        assert len(call.mock_calls) == 1\n-        _, args, _ = call.mock_calls[0]\n-        assert args[0] == request\n-\n-    # Establish that the field header was sent.\n-    _, _, kw = call.mock_calls[0]\n-    assert (\n-        \"x-goog-request-params\",\n-        \"queue=queue_value&task_id=task_id_value\",\n-    ) in kw[\"metadata\"]\n-\n-\n-@pytest.mark.asyncio\n-async def test_buffer_task_field_headers_async():\n-    client = CloudTasksAsyncClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-    )\n-\n-    # Any value that is part of the HTTP/1.1 URI should be sent as\n-    # a field header. Set these to a non-empty value.\n-    request = cloudtasks.BufferTaskRequest()\n-\n-    request.queue = \"queue_value\"\n-    request.task_id = \"task_id_value\"\n-\n-    # Mock the actual call within the gRPC stub, and fake the request.\n-    with mock.patch.object(type(client.transport.buffer_task), \"__call__\") as call:\n-        call.return_value = grpc_helpers_async.FakeUnaryUnaryCall(\n-            cloudtasks.BufferTaskResponse()\n-        )\n-        await client.buffer_task(request)\n-\n-        # Establish that the underlying gRPC stub method was called.\n-        assert len(call.mock_calls)\n-        _, args, _ = call.mock_calls[0]\n-        assert args[0] == request\n-\n-    # Establish that the field header was sent.\n-    _, _, kw = call.mock_calls[0]\n-    assert (\n-        \"x-goog-request-params\",\n-        \"queue=queue_value&task_id=task_id_value\",\n-    ) in kw[\"metadata\"]\n-\n-\n-def test_buffer_task_flattened():\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-    )\n-\n-    # Mock the actual call within the gRPC stub, and fake the request.\n-    with mock.patch.object(type(client.transport.buffer_task), \"__call__\") as call:\n-        # Designate an appropriate return value for the call.\n-        call.return_value = cloudtasks.BufferTaskResponse()\n-        # Call the method with a truthy value for each flattened field,\n-        # using the keyword arguments to the method.\n-        client.buffer_task(\n-            queue=\"queue_value\",\n-            task_id=\"task_id_value\",\n-            body=httpbody_pb2.HttpBody(content_type=\"content_type_value\"),\n-        )\n-\n-        # Establish that the underlying call was made with the expected\n-        # request object values.\n-        assert len(call.mock_calls) == 1\n-        _, args, _ = call.mock_calls[0]\n-        arg = args[0].queue\n-        mock_val = \"queue_value\"\n-        assert arg == mock_val\n-        arg = args[0].task_id\n-        mock_val = \"task_id_value\"\n-        assert arg == mock_val\n-        arg = args[0].body\n-        mock_val = httpbody_pb2.HttpBody(content_type=\"content_type_value\")\n-        assert arg == mock_val\n-\n-\n-def test_buffer_task_flattened_error():\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-    )\n-\n-    # Attempting to call a method with both a request object and flattened\n-    # fields is an error.\n-    with pytest.raises(ValueError):\n-        client.buffer_task(\n-            cloudtasks.BufferTaskRequest(),\n-            queue=\"queue_value\",\n-            task_id=\"task_id_value\",\n-            body=httpbody_pb2.HttpBody(content_type=\"content_type_value\"),\n-        )\n-\n-\n-@pytest.mark.asyncio\n-async def test_buffer_task_flattened_async():\n-    client = CloudTasksAsyncClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-    )\n-\n-    # Mock the actual call within the gRPC stub, and fake the request.\n-    with mock.patch.object(type(client.transport.buffer_task), \"__call__\") as call:\n-        # Designate an appropriate return value for the call.\n-        call.return_value = cloudtasks.BufferTaskResponse()\n-\n-        call.return_value = grpc_helpers_async.FakeUnaryUnaryCall(\n-            cloudtasks.BufferTaskResponse()\n-        )\n-        # Call the method with a truthy value for each flattened field,\n-        # using the keyword arguments to the method.\n-        response = await client.buffer_task(\n-            queue=\"queue_value\",\n-            task_id=\"task_id_value\",\n-            body=httpbody_pb2.HttpBody(content_type=\"content_type_value\"),\n-        )\n-\n-        # Establish that the underlying call was made with the expected\n-        # request object values.\n-        assert len(call.mock_calls)\n-        _, args, _ = call.mock_calls[0]\n-        arg = args[0].queue\n-        mock_val = \"queue_value\"\n-        assert arg == mock_val\n-        arg = args[0].task_id\n-        mock_val = \"task_id_value\"\n-        assert arg == mock_val\n-        arg = args[0].body\n-        mock_val = httpbody_pb2.HttpBody(content_type=\"content_type_value\")\n-        assert arg == mock_val\n-\n-\n-@pytest.mark.asyncio\n-async def test_buffer_task_flattened_error_async():\n-    client = CloudTasksAsyncClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-    )\n-\n-    # Attempting to call a method with both a request object and flattened\n-    # fields is an error.\n-    with pytest.raises(ValueError):\n-        await client.buffer_task(\n-            cloudtasks.BufferTaskRequest(),\n-            queue=\"queue_value\",\n-            task_id=\"task_id_value\",\n-            body=httpbody_pb2.HttpBody(content_type=\"content_type_value\"),\n-        )\n-\n-\n @pytest.mark.parametrize(\n     \"request_type\",\n     [\n@@ -11998,284 +11750,6 @@ def test_run_task_rest_error():\n     )\n \n \n-@pytest.mark.parametrize(\n-    \"request_type\",\n-    [\n-        cloudtasks.BufferTaskRequest,\n-        dict,\n-    ],\n-)\n-def test_buffer_task_rest(request_type):\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        transport=\"rest\",\n-    )\n-\n-    # send a request that will satisfy transcoding\n-    request_init = {\n-        \"queue\": \"projects/sample1/locations/sample2/queues/sample3\",\n-        \"task_id\": \"sample4\",\n-    }\n-    request = request_type(**request_init)\n-\n-    # Mock the http request call within the method and fake a response.\n-    with mock.patch.object(type(client.transport._session), \"request\") as req:\n-        # Designate an appropriate value for the returned response.\n-        return_value = cloudtasks.BufferTaskResponse()\n-\n-        # Wrap the value into a proper Response obj\n-        response_value = Response()\n-        response_value.status_code = 200\n-        # Convert return value to protobuf type\n-        return_value = cloudtasks.BufferTaskResponse.pb(return_value)\n-        json_return_value = json_format.MessageToJson(return_value)\n-\n-        response_value._content = json_return_value.encode(\"UTF-8\")\n-        req.return_value = response_value\n-        response = client.buffer_task(request)\n-\n-    # Establish that the response is the type that we expect.\n-    assert isinstance(response, cloudtasks.BufferTaskResponse)\n-\n-\n-def test_buffer_task_rest_required_fields(request_type=cloudtasks.BufferTaskRequest):\n-    transport_class = transports.CloudTasksRestTransport\n-\n-    request_init = {}\n-    request_init[\"queue\"] = \"\"\n-    request = request_type(**request_init)\n-    pb_request = request_type.pb(request)\n-    jsonified_request = json.loads(\n-        json_format.MessageToJson(\n-            pb_request,\n-            including_default_value_fields=False,\n-            use_integers_for_enums=False,\n-        )\n-    )\n-\n-    # verify fields with default values are dropped\n-\n-    unset_fields = transport_class(\n-        credentials=ga_credentials.AnonymousCredentials()\n-    ).buffer_task._get_unset_required_fields(jsonified_request)\n-    jsonified_request.update(unset_fields)\n-\n-    # verify required fields with default values are now present\n-\n-    jsonified_request[\"queue\"] = \"queue_value\"\n-\n-    unset_fields = transport_class(\n-        credentials=ga_credentials.AnonymousCredentials()\n-    ).buffer_task._get_unset_required_fields(jsonified_request)\n-    jsonified_request.update(unset_fields)\n-\n-    # verify required fields with non-default values are left alone\n-    assert \"queue\" in jsonified_request\n-    assert jsonified_request[\"queue\"] == \"queue_value\"\n-\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        transport=\"rest\",\n-    )\n-    request = request_type(**request_init)\n-\n-    # Designate an appropriate value for the returned response.\n-    return_value = cloudtasks.BufferTaskResponse()\n-    # Mock the http request call within the method and fake a response.\n-    with mock.patch.object(Session, \"request\") as req:\n-        # We need to mock transcode() because providing default values\n-        # for required fields will fail the real version if the http_options\n-        # expect actual values for those fields.\n-        with mock.patch.object(path_template, \"transcode\") as transcode:\n-            # A uri without fields and an empty body will force all the\n-            # request fields to show up in the query_params.\n-            pb_request = request_type.pb(request)\n-            transcode_result = {\n-                \"uri\": \"v1/sample_method\",\n-                \"method\": \"post\",\n-                \"query_params\": pb_request,\n-            }\n-            transcode_result[\"body\"] = pb_request\n-            transcode.return_value = transcode_result\n-\n-            response_value = Response()\n-            response_value.status_code = 200\n-\n-            # Convert return value to protobuf type\n-            return_value = cloudtasks.BufferTaskResponse.pb(return_value)\n-            json_return_value = json_format.MessageToJson(return_value)\n-\n-            response_value._content = json_return_value.encode(\"UTF-8\")\n-            req.return_value = response_value\n-\n-            response = client.buffer_task(request)\n-\n-            expected_params = [(\"$alt\", \"json;enum-encoding=int\")]\n-            actual_params = req.call_args.kwargs[\"params\"]\n-            assert expected_params == actual_params\n-\n-\n-def test_buffer_task_rest_unset_required_fields():\n-    transport = transports.CloudTasksRestTransport(\n-        credentials=ga_credentials.AnonymousCredentials\n-    )\n-\n-    unset_fields = transport.buffer_task._get_unset_required_fields({})\n-    assert set(unset_fields) == (set(()) & set((\"queue\",)))\n-\n-\n-@pytest.mark.parametrize(\"null_interceptor\", [True, False])\n-def test_buffer_task_rest_interceptors(null_interceptor):\n-    transport = transports.CloudTasksRestTransport(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        interceptor=None\n-        if null_interceptor\n-        else transports.CloudTasksRestInterceptor(),\n-    )\n-    client = CloudTasksClient(transport=transport)\n-    with mock.patch.object(\n-        type(client.transport._session), \"request\"\n-    ) as req, mock.patch.object(\n-        path_template, \"transcode\"\n-    ) as transcode, mock.patch.object(\n-        transports.CloudTasksRestInterceptor, \"post_buffer_task\"\n-    ) as post, mock.patch.object(\n-        transports.CloudTasksRestInterceptor, \"pre_buffer_task\"\n-    ) as pre:\n-        pre.assert_not_called()\n-        post.assert_not_called()\n-        pb_message = cloudtasks.BufferTaskRequest.pb(cloudtasks.BufferTaskRequest())\n-        transcode.return_value = {\n-            \"method\": \"post\",\n-            \"uri\": \"my_uri\",\n-            \"body\": pb_message,\n-            \"query_params\": pb_message,\n-        }\n-\n-        req.return_value = Response()\n-        req.return_value.status_code = 200\n-        req.return_value.request = PreparedRequest()\n-        req.return_value._content = cloudtasks.BufferTaskResponse.to_json(\n-            cloudtasks.BufferTaskResponse()\n-        )\n-\n-        request = cloudtasks.BufferTaskRequest()\n-        metadata = [\n-            (\"key\", \"val\"),\n-            (\"cephalopod\", \"squid\"),\n-        ]\n-        pre.return_value = request, metadata\n-        post.return_value = cloudtasks.BufferTaskResponse()\n-\n-        client.buffer_task(\n-            request,\n-            metadata=[\n-                (\"key\", \"val\"),\n-                (\"cephalopod\", \"squid\"),\n-            ],\n-        )\n-\n-        pre.assert_called_once()\n-        post.assert_called_once()\n-\n-\n-def test_buffer_task_rest_bad_request(\n-    transport: str = \"rest\", request_type=cloudtasks.BufferTaskRequest\n-):\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        transport=transport,\n-    )\n-\n-    # send a request that will satisfy transcoding\n-    request_init = {\n-        \"queue\": \"projects/sample1/locations/sample2/queues/sample3\",\n-        \"task_id\": \"sample4\",\n-    }\n-    request = request_type(**request_init)\n-\n-    # Mock the http request call within the method and fake a BadRequest error.\n-    with mock.patch.object(Session, \"request\") as req, pytest.raises(\n-        core_exceptions.BadRequest\n-    ):\n-        # Wrap the value into a proper Response obj\n-        response_value = Response()\n-        response_value.status_code = 400\n-        response_value.request = Request()\n-        req.return_value = response_value\n-        client.buffer_task(request)\n-\n-\n-def test_buffer_task_rest_flattened():\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        transport=\"rest\",\n-    )\n-\n-    # Mock the http request call within the method and fake a response.\n-    with mock.patch.object(type(client.transport._session), \"request\") as req:\n-        # Designate an appropriate value for the returned response.\n-        return_value = cloudtasks.BufferTaskResponse()\n-\n-        # get arguments that satisfy an http rule for this method\n-        sample_request = {\n-            \"queue\": \"projects/sample1/locations/sample2/queues/sample3\",\n-            \"task_id\": \"sample4\",\n-        }\n-\n-        # get truthy value for each flattened field\n-        mock_args = dict(\n-            queue=\"queue_value\",\n-            task_id=\"task_id_value\",\n-            body=httpbody_pb2.HttpBody(content_type=\"content_type_value\"),\n-        )\n-        mock_args.update(sample_request)\n-\n-        # Wrap the value into a proper Response obj\n-        response_value = Response()\n-        response_value.status_code = 200\n-        # Convert return value to protobuf type\n-        return_value = cloudtasks.BufferTaskResponse.pb(return_value)\n-        json_return_value = json_format.MessageToJson(return_value)\n-        response_value._content = json_return_value.encode(\"UTF-8\")\n-        req.return_value = response_value\n-\n-        client.buffer_task(**mock_args)\n-\n-        # Establish that the underlying call was made with the expected\n-        # request object values.\n-        assert len(req.mock_calls) == 1\n-        _, args, _ = req.mock_calls[0]\n-        assert path_template.validate(\n-            \"%s/v2beta2/{queue=projects/*/locations/*/queues/*}/tasks/{task_id}:buffer\"\n-            % client.transport._host,\n-            args[1],\n-        )\n-\n-\n-def test_buffer_task_rest_flattened_error(transport: str = \"rest\"):\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        transport=transport,\n-    )\n-\n-    # Attempting to call a method with both a request object and flattened\n-    # fields is an error.\n-    with pytest.raises(ValueError):\n-        client.buffer_task(\n-            cloudtasks.BufferTaskRequest(),\n-            queue=\"queue_value\",\n-            task_id=\"task_id_value\",\n-            body=httpbody_pb2.HttpBody(content_type=\"content_type_value\"),\n-        )\n-\n-\n-def test_buffer_task_rest_error():\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(), transport=\"rest\"\n-    )\n-\n-\n def test_upload_queue_yaml_rest_error():\n     client = CloudTasksClient(\n         credentials=ga_credentials.AnonymousCredentials(), transport=\"rest\"\n@@ -12449,7 +11923,6 @@ def test_cloud_tasks_base_transport():\n         \"renew_lease\",\n         \"cancel_lease\",\n         \"run_task\",\n-        \"buffer_task\",\n         \"get_location\",\n         \"list_locations\",\n     )\n@@ -12770,9 +12243,6 @@ def test_cloud_tasks_client_transport_session_collision(transport_name):\n     session1 = client1.transport.run_task._session\n     session2 = client2.transport.run_task._session\n     assert session1 != session2\n-    session1 = client1.transport.buffer_task._session\n-    session2 = client2.transport.buffer_task._session\n-    assert session1 != session2\n \n \n def test_cloud_tasks_grpc_transport_channel():\n"
        },
        {
            "commit": "99ad8a351bb884f1e398c1d85c62d6b6e0bdd67e",
            "file_path": "packages/google-cloud-tasks/tests/unit/gapic/tasks_v2beta3/test_cloud_tasks.py",
            "diff": "diff --git a/packages/google-cloud-tasks/tests/unit/gapic/tasks_v2beta3/test_cloud_tasks.py b/packages/google-cloud-tasks/tests/unit/gapic/tasks_v2beta3/test_cloud_tasks.py\nindex 4ac80ca80d..5c54ac41d9 100644\n--- a/packages/google-cloud-tasks/tests/unit/gapic/tasks_v2beta3/test_cloud_tasks.py\n+++ b/packages/google-cloud-tasks/tests/unit/gapic/tasks_v2beta3/test_cloud_tasks.py\n@@ -26,7 +26,6 @@ from collections.abc import Iterable\n import json\n import math\n \n-from google.api import httpbody_pb2  # type: ignore\n from google.api_core import gapic_v1, grpc_helpers, grpc_helpers_async, path_template\n from google.api_core import client_options\n from google.api_core import exceptions as core_exceptions\n@@ -4920,254 +4919,6 @@ async def test_run_task_flattened_error_async():\n         )\n \n \n-@pytest.mark.parametrize(\n-    \"request_type\",\n-    [\n-        cloudtasks.BufferTaskRequest,\n-        dict,\n-    ],\n-)\n-def test_buffer_task(request_type, transport: str = \"grpc\"):\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        transport=transport,\n-    )\n-\n-    # Everything is optional in proto3 as far as the runtime is concerned,\n-    # and we are mocking out the actual API, so just send an empty request.\n-    request = request_type()\n-\n-    # Mock the actual call within the gRPC stub, and fake the request.\n-    with mock.patch.object(type(client.transport.buffer_task), \"__call__\") as call:\n-        # Designate an appropriate return value for the call.\n-        call.return_value = cloudtasks.BufferTaskResponse()\n-        response = client.buffer_task(request)\n-\n-        # Establish that the underlying gRPC stub method was called.\n-        assert len(call.mock_calls) == 1\n-        _, args, _ = call.mock_calls[0]\n-        assert args[0] == cloudtasks.BufferTaskRequest()\n-\n-    # Establish that the response is the type that we expect.\n-    assert isinstance(response, cloudtasks.BufferTaskResponse)\n-\n-\n-def test_buffer_task_empty_call():\n-    # This test is a coverage failsafe to make sure that totally empty calls,\n-    # i.e. request == None and no flattened fields passed, work.\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        transport=\"grpc\",\n-    )\n-\n-    # Mock the actual call within the gRPC stub, and fake the request.\n-    with mock.patch.object(type(client.transport.buffer_task), \"__call__\") as call:\n-        client.buffer_task()\n-        call.assert_called()\n-        _, args, _ = call.mock_calls[0]\n-        assert args[0] == cloudtasks.BufferTaskRequest()\n-\n-\n-@pytest.mark.asyncio\n-async def test_buffer_task_async(\n-    transport: str = \"grpc_asyncio\", request_type=cloudtasks.BufferTaskRequest\n-):\n-    client = CloudTasksAsyncClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        transport=transport,\n-    )\n-\n-    # Everything is optional in proto3 as far as the runtime is concerned,\n-    # and we are mocking out the actual API, so just send an empty request.\n-    request = request_type()\n-\n-    # Mock the actual call within the gRPC stub, and fake the request.\n-    with mock.patch.object(type(client.transport.buffer_task), \"__call__\") as call:\n-        # Designate an appropriate return value for the call.\n-        call.return_value = grpc_helpers_async.FakeUnaryUnaryCall(\n-            cloudtasks.BufferTaskResponse()\n-        )\n-        response = await client.buffer_task(request)\n-\n-        # Establish that the underlying gRPC stub method was called.\n-        assert len(call.mock_calls)\n-        _, args, _ = call.mock_calls[0]\n-        assert args[0] == cloudtasks.BufferTaskRequest()\n-\n-    # Establish that the response is the type that we expect.\n-    assert isinstance(response, cloudtasks.BufferTaskResponse)\n-\n-\n-@pytest.mark.asyncio\n-async def test_buffer_task_async_from_dict():\n-    await test_buffer_task_async(request_type=dict)\n-\n-\n-def test_buffer_task_field_headers():\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-    )\n-\n-    # Any value that is part of the HTTP/1.1 URI should be sent as\n-    # a field header. Set these to a non-empty value.\n-    request = cloudtasks.BufferTaskRequest()\n-\n-    request.queue = \"queue_value\"\n-    request.task_id = \"task_id_value\"\n-\n-    # Mock the actual call within the gRPC stub, and fake the request.\n-    with mock.patch.object(type(client.transport.buffer_task), \"__call__\") as call:\n-        call.return_value = cloudtasks.BufferTaskResponse()\n-        client.buffer_task(request)\n-\n-        # Establish that the underlying gRPC stub method was called.\n-        assert len(call.mock_calls) == 1\n-        _, args, _ = call.mock_calls[0]\n-        assert args[0] == request\n-\n-    # Establish that the field header was sent.\n-    _, _, kw = call.mock_calls[0]\n-    assert (\n-        \"x-goog-request-params\",\n-        \"queue=queue_value&task_id=task_id_value\",\n-    ) in kw[\"metadata\"]\n-\n-\n-@pytest.mark.asyncio\n-async def test_buffer_task_field_headers_async():\n-    client = CloudTasksAsyncClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-    )\n-\n-    # Any value that is part of the HTTP/1.1 URI should be sent as\n-    # a field header. Set these to a non-empty value.\n-    request = cloudtasks.BufferTaskRequest()\n-\n-    request.queue = \"queue_value\"\n-    request.task_id = \"task_id_value\"\n-\n-    # Mock the actual call within the gRPC stub, and fake the request.\n-    with mock.patch.object(type(client.transport.buffer_task), \"__call__\") as call:\n-        call.return_value = grpc_helpers_async.FakeUnaryUnaryCall(\n-            cloudtasks.BufferTaskResponse()\n-        )\n-        await client.buffer_task(request)\n-\n-        # Establish that the underlying gRPC stub method was called.\n-        assert len(call.mock_calls)\n-        _, args, _ = call.mock_calls[0]\n-        assert args[0] == request\n-\n-    # Establish that the field header was sent.\n-    _, _, kw = call.mock_calls[0]\n-    assert (\n-        \"x-goog-request-params\",\n-        \"queue=queue_value&task_id=task_id_value\",\n-    ) in kw[\"metadata\"]\n-\n-\n-def test_buffer_task_flattened():\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-    )\n-\n-    # Mock the actual call within the gRPC stub, and fake the request.\n-    with mock.patch.object(type(client.transport.buffer_task), \"__call__\") as call:\n-        # Designate an appropriate return value for the call.\n-        call.return_value = cloudtasks.BufferTaskResponse()\n-        # Call the method with a truthy value for each flattened field,\n-        # using the keyword arguments to the method.\n-        client.buffer_task(\n-            queue=\"queue_value\",\n-            task_id=\"task_id_value\",\n-            body=httpbody_pb2.HttpBody(content_type=\"content_type_value\"),\n-        )\n-\n-        # Establish that the underlying call was made with the expected\n-        # request object values.\n-        assert len(call.mock_calls) == 1\n-        _, args, _ = call.mock_calls[0]\n-        arg = args[0].queue\n-        mock_val = \"queue_value\"\n-        assert arg == mock_val\n-        arg = args[0].task_id\n-        mock_val = \"task_id_value\"\n-        assert arg == mock_val\n-        arg = args[0].body\n-        mock_val = httpbody_pb2.HttpBody(content_type=\"content_type_value\")\n-        assert arg == mock_val\n-\n-\n-def test_buffer_task_flattened_error():\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-    )\n-\n-    # Attempting to call a method with both a request object and flattened\n-    # fields is an error.\n-    with pytest.raises(ValueError):\n-        client.buffer_task(\n-            cloudtasks.BufferTaskRequest(),\n-            queue=\"queue_value\",\n-            task_id=\"task_id_value\",\n-            body=httpbody_pb2.HttpBody(content_type=\"content_type_value\"),\n-        )\n-\n-\n-@pytest.mark.asyncio\n-async def test_buffer_task_flattened_async():\n-    client = CloudTasksAsyncClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-    )\n-\n-    # Mock the actual call within the gRPC stub, and fake the request.\n-    with mock.patch.object(type(client.transport.buffer_task), \"__call__\") as call:\n-        # Designate an appropriate return value for the call.\n-        call.return_value = cloudtasks.BufferTaskResponse()\n-\n-        call.return_value = grpc_helpers_async.FakeUnaryUnaryCall(\n-            cloudtasks.BufferTaskResponse()\n-        )\n-        # Call the method with a truthy value for each flattened field,\n-        # using the keyword arguments to the method.\n-        response = await client.buffer_task(\n-            queue=\"queue_value\",\n-            task_id=\"task_id_value\",\n-            body=httpbody_pb2.HttpBody(content_type=\"content_type_value\"),\n-        )\n-\n-        # Establish that the underlying call was made with the expected\n-        # request object values.\n-        assert len(call.mock_calls)\n-        _, args, _ = call.mock_calls[0]\n-        arg = args[0].queue\n-        mock_val = \"queue_value\"\n-        assert arg == mock_val\n-        arg = args[0].task_id\n-        mock_val = \"task_id_value\"\n-        assert arg == mock_val\n-        arg = args[0].body\n-        mock_val = httpbody_pb2.HttpBody(content_type=\"content_type_value\")\n-        assert arg == mock_val\n-\n-\n-@pytest.mark.asyncio\n-async def test_buffer_task_flattened_error_async():\n-    client = CloudTasksAsyncClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-    )\n-\n-    # Attempting to call a method with both a request object and flattened\n-    # fields is an error.\n-    with pytest.raises(ValueError):\n-        await client.buffer_task(\n-            cloudtasks.BufferTaskRequest(),\n-            queue=\"queue_value\",\n-            task_id=\"task_id_value\",\n-            body=httpbody_pb2.HttpBody(content_type=\"content_type_value\"),\n-        )\n-\n-\n @pytest.mark.parametrize(\n     \"request_type\",\n     [\n@@ -9897,284 +9648,6 @@ def test_run_task_rest_error():\n     )\n \n \n-@pytest.mark.parametrize(\n-    \"request_type\",\n-    [\n-        cloudtasks.BufferTaskRequest,\n-        dict,\n-    ],\n-)\n-def test_buffer_task_rest(request_type):\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        transport=\"rest\",\n-    )\n-\n-    # send a request that will satisfy transcoding\n-    request_init = {\n-        \"queue\": \"projects/sample1/locations/sample2/queues/sample3\",\n-        \"task_id\": \"sample4\",\n-    }\n-    request = request_type(**request_init)\n-\n-    # Mock the http request call within the method and fake a response.\n-    with mock.patch.object(type(client.transport._session), \"request\") as req:\n-        # Designate an appropriate value for the returned response.\n-        return_value = cloudtasks.BufferTaskResponse()\n-\n-        # Wrap the value into a proper Response obj\n-        response_value = Response()\n-        response_value.status_code = 200\n-        # Convert return value to protobuf type\n-        return_value = cloudtasks.BufferTaskResponse.pb(return_value)\n-        json_return_value = json_format.MessageToJson(return_value)\n-\n-        response_value._content = json_return_value.encode(\"UTF-8\")\n-        req.return_value = response_value\n-        response = client.buffer_task(request)\n-\n-    # Establish that the response is the type that we expect.\n-    assert isinstance(response, cloudtasks.BufferTaskResponse)\n-\n-\n-def test_buffer_task_rest_required_fields(request_type=cloudtasks.BufferTaskRequest):\n-    transport_class = transports.CloudTasksRestTransport\n-\n-    request_init = {}\n-    request_init[\"queue\"] = \"\"\n-    request = request_type(**request_init)\n-    pb_request = request_type.pb(request)\n-    jsonified_request = json.loads(\n-        json_format.MessageToJson(\n-            pb_request,\n-            including_default_value_fields=False,\n-            use_integers_for_enums=False,\n-        )\n-    )\n-\n-    # verify fields with default values are dropped\n-\n-    unset_fields = transport_class(\n-        credentials=ga_credentials.AnonymousCredentials()\n-    ).buffer_task._get_unset_required_fields(jsonified_request)\n-    jsonified_request.update(unset_fields)\n-\n-    # verify required fields with default values are now present\n-\n-    jsonified_request[\"queue\"] = \"queue_value\"\n-\n-    unset_fields = transport_class(\n-        credentials=ga_credentials.AnonymousCredentials()\n-    ).buffer_task._get_unset_required_fields(jsonified_request)\n-    jsonified_request.update(unset_fields)\n-\n-    # verify required fields with non-default values are left alone\n-    assert \"queue\" in jsonified_request\n-    assert jsonified_request[\"queue\"] == \"queue_value\"\n-\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        transport=\"rest\",\n-    )\n-    request = request_type(**request_init)\n-\n-    # Designate an appropriate value for the returned response.\n-    return_value = cloudtasks.BufferTaskResponse()\n-    # Mock the http request call within the method and fake a response.\n-    with mock.patch.object(Session, \"request\") as req:\n-        # We need to mock transcode() because providing default values\n-        # for required fields will fail the real version if the http_options\n-        # expect actual values for those fields.\n-        with mock.patch.object(path_template, \"transcode\") as transcode:\n-            # A uri without fields and an empty body will force all the\n-            # request fields to show up in the query_params.\n-            pb_request = request_type.pb(request)\n-            transcode_result = {\n-                \"uri\": \"v1/sample_method\",\n-                \"method\": \"post\",\n-                \"query_params\": pb_request,\n-            }\n-            transcode_result[\"body\"] = pb_request\n-            transcode.return_value = transcode_result\n-\n-            response_value = Response()\n-            response_value.status_code = 200\n-\n-            # Convert return value to protobuf type\n-            return_value = cloudtasks.BufferTaskResponse.pb(return_value)\n-            json_return_value = json_format.MessageToJson(return_value)\n-\n-            response_value._content = json_return_value.encode(\"UTF-8\")\n-            req.return_value = response_value\n-\n-            response = client.buffer_task(request)\n-\n-            expected_params = [(\"$alt\", \"json;enum-encoding=int\")]\n-            actual_params = req.call_args.kwargs[\"params\"]\n-            assert expected_params == actual_params\n-\n-\n-def test_buffer_task_rest_unset_required_fields():\n-    transport = transports.CloudTasksRestTransport(\n-        credentials=ga_credentials.AnonymousCredentials\n-    )\n-\n-    unset_fields = transport.buffer_task._get_unset_required_fields({})\n-    assert set(unset_fields) == (set(()) & set((\"queue\",)))\n-\n-\n-@pytest.mark.parametrize(\"null_interceptor\", [True, False])\n-def test_buffer_task_rest_interceptors(null_interceptor):\n-    transport = transports.CloudTasksRestTransport(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        interceptor=None\n-        if null_interceptor\n-        else transports.CloudTasksRestInterceptor(),\n-    )\n-    client = CloudTasksClient(transport=transport)\n-    with mock.patch.object(\n-        type(client.transport._session), \"request\"\n-    ) as req, mock.patch.object(\n-        path_template, \"transcode\"\n-    ) as transcode, mock.patch.object(\n-        transports.CloudTasksRestInterceptor, \"post_buffer_task\"\n-    ) as post, mock.patch.object(\n-        transports.CloudTasksRestInterceptor, \"pre_buffer_task\"\n-    ) as pre:\n-        pre.assert_not_called()\n-        post.assert_not_called()\n-        pb_message = cloudtasks.BufferTaskRequest.pb(cloudtasks.BufferTaskRequest())\n-        transcode.return_value = {\n-            \"method\": \"post\",\n-            \"uri\": \"my_uri\",\n-            \"body\": pb_message,\n-            \"query_params\": pb_message,\n-        }\n-\n-        req.return_value = Response()\n-        req.return_value.status_code = 200\n-        req.return_value.request = PreparedRequest()\n-        req.return_value._content = cloudtasks.BufferTaskResponse.to_json(\n-            cloudtasks.BufferTaskResponse()\n-        )\n-\n-        request = cloudtasks.BufferTaskRequest()\n-        metadata = [\n-            (\"key\", \"val\"),\n-            (\"cephalopod\", \"squid\"),\n-        ]\n-        pre.return_value = request, metadata\n-        post.return_value = cloudtasks.BufferTaskResponse()\n-\n-        client.buffer_task(\n-            request,\n-            metadata=[\n-                (\"key\", \"val\"),\n-                (\"cephalopod\", \"squid\"),\n-            ],\n-        )\n-\n-        pre.assert_called_once()\n-        post.assert_called_once()\n-\n-\n-def test_buffer_task_rest_bad_request(\n-    transport: str = \"rest\", request_type=cloudtasks.BufferTaskRequest\n-):\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        transport=transport,\n-    )\n-\n-    # send a request that will satisfy transcoding\n-    request_init = {\n-        \"queue\": \"projects/sample1/locations/sample2/queues/sample3\",\n-        \"task_id\": \"sample4\",\n-    }\n-    request = request_type(**request_init)\n-\n-    # Mock the http request call within the method and fake a BadRequest error.\n-    with mock.patch.object(Session, \"request\") as req, pytest.raises(\n-        core_exceptions.BadRequest\n-    ):\n-        # Wrap the value into a proper Response obj\n-        response_value = Response()\n-        response_value.status_code = 400\n-        response_value.request = Request()\n-        req.return_value = response_value\n-        client.buffer_task(request)\n-\n-\n-def test_buffer_task_rest_flattened():\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        transport=\"rest\",\n-    )\n-\n-    # Mock the http request call within the method and fake a response.\n-    with mock.patch.object(type(client.transport._session), \"request\") as req:\n-        # Designate an appropriate value for the returned response.\n-        return_value = cloudtasks.BufferTaskResponse()\n-\n-        # get arguments that satisfy an http rule for this method\n-        sample_request = {\n-            \"queue\": \"projects/sample1/locations/sample2/queues/sample3\",\n-            \"task_id\": \"sample4\",\n-        }\n-\n-        # get truthy value for each flattened field\n-        mock_args = dict(\n-            queue=\"queue_value\",\n-            task_id=\"task_id_value\",\n-            body=httpbody_pb2.HttpBody(content_type=\"content_type_value\"),\n-        )\n-        mock_args.update(sample_request)\n-\n-        # Wrap the value into a proper Response obj\n-        response_value = Response()\n-        response_value.status_code = 200\n-        # Convert return value to protobuf type\n-        return_value = cloudtasks.BufferTaskResponse.pb(return_value)\n-        json_return_value = json_format.MessageToJson(return_value)\n-        response_value._content = json_return_value.encode(\"UTF-8\")\n-        req.return_value = response_value\n-\n-        client.buffer_task(**mock_args)\n-\n-        # Establish that the underlying call was made with the expected\n-        # request object values.\n-        assert len(req.mock_calls) == 1\n-        _, args, _ = req.mock_calls[0]\n-        assert path_template.validate(\n-            \"%s/v2beta3/{queue=projects/*/locations/*/queues/*}/tasks/{task_id}:buffer\"\n-            % client.transport._host,\n-            args[1],\n-        )\n-\n-\n-def test_buffer_task_rest_flattened_error(transport: str = \"rest\"):\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(),\n-        transport=transport,\n-    )\n-\n-    # Attempting to call a method with both a request object and flattened\n-    # fields is an error.\n-    with pytest.raises(ValueError):\n-        client.buffer_task(\n-            cloudtasks.BufferTaskRequest(),\n-            queue=\"queue_value\",\n-            task_id=\"task_id_value\",\n-            body=httpbody_pb2.HttpBody(content_type=\"content_type_value\"),\n-        )\n-\n-\n-def test_buffer_task_rest_error():\n-    client = CloudTasksClient(\n-        credentials=ga_credentials.AnonymousCredentials(), transport=\"rest\"\n-    )\n-\n-\n def test_credentials_transport_error():\n     # It is an error to provide credentials and a transport instance.\n     transport = transports.CloudTasksGrpcTransport(\n@@ -10330,7 +9803,6 @@ def test_cloud_tasks_base_transport():\n         \"create_task\",\n         \"delete_task\",\n         \"run_task\",\n-        \"buffer_task\",\n         \"get_location\",\n         \"list_locations\",\n     )\n@@ -10636,9 +10108,6 @@ def test_cloud_tasks_client_transport_session_collision(transport_name):\n     session1 = client1.transport.run_task._session\n     session2 = client2.transport.run_task._session\n     assert session1 != session2\n-    session1 = client1.transport.buffer_task._session\n-    session2 = client2.transport.buffer_task._session\n-    assert session1 != session2\n \n \n def test_cloud_tasks_grpc_transport_channel():\n"
        }
    ]
}