{
    "sha_fail": "1a6efefa726610d7ca262beb8e6adf1607829dbb",
    "changed_files": [
        {
            "commit": "1a6efefa726610d7ca262beb8e6adf1607829dbb",
            "file_path": "libs/agno/agno/knowledge/agent.py",
            "diff": "diff --git a/libs/agno/agno/knowledge/agent.py b/libs/agno/agno/knowledge/agent.py\nindex fe98463ca..fc05521ef 100644\n--- a/libs/agno/agno/knowledge/agent.py\n+++ b/libs/agno/agno/knowledge/agent.py\n@@ -57,11 +57,11 @@ class AgentKnowledge(BaseModel):\n                 f\"Vector db '{self.vector_db.__class__.__module__}' does not support upsert. Falling back to insert.\"\n             )\n \n-    def _load_init(self, recreate: bool, upsert: bool) -> bool:\n+    def _load_init(self, recreate: bool, upsert: bool) -> None:\n         \"\"\"Initial setup for loading knowledge base\"\"\"\n         if self.vector_db is None:\n             logger.warning(\"No vector db provided\")\n-            return False\n+            return\n \n         if recreate:\n             log_info(\"Dropping collection\")\n@@ -73,13 +73,11 @@ class AgentKnowledge(BaseModel):\n \n         self._upsert_warning(upsert)\n \n-        return True\n-\n-    async def _aload_init(self, recreate: bool, upsert: bool) -> bool:\n+    async def _aload_init(self, recreate: bool, upsert: bool) -> None:\n         \"\"\"Initial async setup for loading knowledge base\"\"\"\n         if self.vector_db is None:\n             logger.warning(\"No vector db provided\")\n-            return False\n+            return\n \n         if recreate:\n             log_info(\"Dropping collection\")\n@@ -99,8 +97,6 @@ class AgentKnowledge(BaseModel):\n \n         self._upsert_warning(upsert)\n \n-        return True\n-\n     def search(\n         self, query: str, num_documents: Optional[int] = None, filters: Optional[Dict[str, Any]] = None\n     ) -> List[Document]:\n@@ -150,7 +146,8 @@ class AgentKnowledge(BaseModel):\n             upsert (bool): If True, upserts documents to the vector db. Defaults to False.\n             skip_existing (bool): If True, skips documents which already exist in the vector db when inserting. Defaults to True.\n         \"\"\"\n-        if not self._load_init(recreate, upsert):\n+        self._load_init(recreate, upsert)\n+        if self.vector_db is None:\n             return\n \n         log_info(\"Loading knowledge base\")\n@@ -192,8 +189,8 @@ class AgentKnowledge(BaseModel):\n             upsert (bool): If True, upserts documents to the vector db. Defaults to False.\n             skip_existing (bool): If True, skips documents which already exist in the vector db when inserting. Defaults to True.\n         \"\"\"\n-\n-        if not self._aload_init(recreate, upsert):\n+        self._aload_init(recreate, upsert)\n+        if self.vector_db is None:\n             return\n \n         log_info(\"Loading knowledge base\")\n@@ -237,11 +234,11 @@ class AgentKnowledge(BaseModel):\n             skip_existing (bool): If True, skips documents which already exist in the vector db when inserting. Defaults to True.\n             filters (Optional[Dict[str, Any]]): Filters to add to each row that can be used to limit results during querying. Defaults to None.\n         \"\"\"\n-\n-        log_info(\"Loading knowledge base\")\n-        if not self._load_init(recreate=False, upsert=upsert):\n+        self._load_init(recreate=False, upsert=upsert)\n+        if self.vector_db is None:\n             return\n-\n+        \n+        log_info(\"Loading knowledge base\")\n         # Upsert documents if upsert is True\n         if upsert and self.vector_db.upsert_available():\n             self.vector_db.upsert(documents=documents, filters=filters)\n@@ -276,10 +273,12 @@ class AgentKnowledge(BaseModel):\n             skip_existing (bool): If True, skips documents which already exist in the vector db when inserting. Defaults to True.\n             filters (Optional[Dict[str, Any]]): Filters to add to each row that can be used to limit results during querying. Defaults to None.\n         \"\"\"\n-        log_info(\"Loading knowledge base\")\n-        if not self._aload_init(recreate=False, upsert=upsert):\n+        self._aload_init(recreate=False, upsert=upsert)\n+        if self.vector_db is None:\n             return\n \n+        log_info(\"Loading knowledge base\")\n+\n         # Upsert documents if upsert is True\n         if upsert and self.vector_db.upsert_available():\n             try:\n@@ -571,7 +570,8 @@ class AgentKnowledge(BaseModel):\n             self._track_metadata_structure(metadata)\n \n         # 3. Prepare vector DB\n-        if not self._load_init(recreate, upsert=False):\n+        self._load_init(recreate, upsert=False)\n+        if self.vector_db is None:\n             return False\n         return True\n \n@@ -607,7 +607,8 @@ class AgentKnowledge(BaseModel):\n             self._track_metadata_structure(metadata)\n \n         # 3. Prepare vector DB\n-        if not self._aload_init(recreate, upsert=False):\n+        self._aload_init(recreate, upsert=False)\n+        if self.vector_db is None:\n             return False\n         return True\n \n"
        }
    ]
}