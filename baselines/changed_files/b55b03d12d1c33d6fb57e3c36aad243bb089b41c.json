{
    "sha_fail": "b55b03d12d1c33d6fb57e3c36aad243bb089b41c",
    "changed_files": [
        {
            "commit": "b55b03d12d1c33d6fb57e3c36aad243bb089b41c",
            "file_path": "libs/agno/agno/agent/agent.py",
            "diff": "diff --git a/libs/agno/agno/agent/agent.py b/libs/agno/agno/agent/agent.py\nindex b5c5d8086..6e354f59c 100644\n--- a/libs/agno/agno/agent/agent.py\n+++ b/libs/agno/agno/agent/agent.py\n@@ -5714,14 +5714,30 @@ class Agent:\n                         log_warning(\"Reasoning error. Reasoning response is empty, continuing regular session...\")\n                         break\n \n-                    if (\n-                        reasoning_agent_response.content.reasoning_steps is None\n-                        or len(reasoning_agent_response.content.reasoning_steps) == 0\n-                    ):\n-                        log_warning(\"Reasoning error. Reasoning steps are empty, continuing regular session...\")\n-                        break\n+                    # Handle case where reasoning content is a string\n+                    reasoning_content = reasoning_agent_response.content\n+                    if isinstance(reasoning_content, str):\n+                        try:\n+                            # Try to parse the string as ReasoningSteps\n+                            parsed_content = parse_response_model_str(reasoning_content, ReasoningSteps)\n+                            if parsed_content and hasattr(parsed_content, \"reasoning_steps\"):\n+                                reasoning_steps = parsed_content.reasoning_steps\n+                            else:\n+                                log_warning(\"Failed to parse reasoning response as ReasoningSteps\")\n+                                break\n+                        except Exception as e:\n+                            log_warning(f\"Error parsing reasoning response: {e}\")\n+                            break\n+                    else:\n+                        # Normal flow when content is already parsed\n+                        if (\n+                            reasoning_agent_response.content.reasoning_steps is None\n+                            or len(reasoning_agent_response.content.reasoning_steps) == 0\n+                        ):\n+                            log_warning(\"Reasoning error. Reasoning steps are empty, continuing regular session...\")\n+                            break\n \n-                    reasoning_steps: List[ReasoningStep] = reasoning_agent_response.content.reasoning_steps\n+                        reasoning_steps: List[ReasoningStep] = reasoning_agent_response.content.reasoning_steps\n                     all_reasoning_steps.extend(reasoning_steps)\n                     # Yield reasoning steps\n                     if self.stream_intermediate_steps:\n@@ -5930,11 +5946,29 @@ class Agent:\n                         log_warning(\"Reasoning error. Reasoning response is empty, continuing regular session...\")\n                         break\n \n-                    if reasoning_agent_response.content.reasoning_steps is None:\n-                        log_warning(\"Reasoning error. Reasoning steps are empty, continuing regular session...\")\n-                        break\n+                    # Handle case where content is a string instead of parsed object\n+                    reasoning_content = reasoning_agent_response.content\n+                    if isinstance(reasoning_content, str):\n+                        try:\n+                            # Try to parse the string as ReasoningSteps\n+                            from agno.utils.string import parse_response_model_str\n+\n+                            parsed_content = parse_response_model_str(reasoning_content, ReasoningSteps)\n+                            if parsed_content and hasattr(parsed_content, \"reasoning_steps\"):\n+                                reasoning_steps = parsed_content.reasoning_steps\n+                            else:\n+                                log_warning(\"Failed to parse reasoning response as ReasoningSteps\")\n+                                break\n+                        except Exception as e:\n+                            log_warning(f\"Error parsing reasoning response: {e}\")\n+                            break\n+                    else:\n+                        # Normal flow when content is already parsed\n+                        if reasoning_agent_response.content.reasoning_steps is None:\n+                            log_warning(\"Reasoning error. Reasoning steps are empty, continuing regular session...\")\n+                            break\n \n-                    reasoning_steps: List[ReasoningStep] = reasoning_agent_response.content.reasoning_steps\n+                        reasoning_steps: List[ReasoningStep] = reasoning_agent_response.content.reasoning_steps\n                     all_reasoning_steps.extend(reasoning_steps)\n                     # Yield reasoning steps\n                     if self.stream_intermediate_steps:\n"
        },
        {
            "commit": "b55b03d12d1c33d6fb57e3c36aad243bb089b41c",
            "file_path": "libs/agno/agno/models/openai/chat.py",
            "diff": "diff --git a/libs/agno/agno/models/openai/chat.py b/libs/agno/agno/models/openai/chat.py\nindex 230bb5353..e30ef1b3d 100644\n--- a/libs/agno/agno/models/openai/chat.py\n+++ b/libs/agno/agno/models/openai/chat.py\n@@ -661,17 +661,6 @@ class OpenAIChat(Model):\n         if hasattr(response_message, \"reasoning_content\") and response_message.reasoning_content is not None:\n             model_response.reasoning_content = response_message.reasoning_content\n \n-        try:\n-            if (\n-                response_format is not None\n-                and isinstance(response_format, type)\n-                and issubclass(response_format, BaseModel)\n-            ):\n-                if hasattr(response_message, \"parsed\") and response_message.parsed is not None:\n-                    model_response.parsed = response_message.parsed\n-        except Exception as e:\n-            log_warning(f\"Error retrieving structured outputs: {e}\")\n-\n         if response.usage is not None:\n             model_response.response_usage = response.usage\n \n"
        }
    ]
}