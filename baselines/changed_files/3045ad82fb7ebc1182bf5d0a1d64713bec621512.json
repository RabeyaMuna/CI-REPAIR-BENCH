{
    "sha_fail": "3045ad82fb7ebc1182bf5d0a1d64713bec621512",
    "changed_files": [
        {
            "commit": "3045ad82fb7ebc1182bf5d0a1d64713bec621512",
            "file_path": "libs/agno/agno/app/playground/async_router.py",
            "diff": "diff --git a/libs/agno/agno/app/playground/async_router.py b/libs/agno/agno/app/playground/async_router.py\nindex e829d7933..5ec5fcd15 100644\n--- a/libs/agno/agno/app/playground/async_router.py\n+++ b/libs/agno/agno/app/playground/async_router.py\n@@ -5,7 +5,9 @@ from typing import Any, AsyncGenerator, Dict, List, Optional, cast\n from uuid import uuid4\n \n from fastapi import APIRouter, File, Form, HTTPException, Query, UploadFile\n+from fastapi.params import Body\n from fastapi.responses import JSONResponse, StreamingResponse\n+from pydantic import BaseModel\n \n from agno.agent.agent import Agent, RunResponse\n from agno.app.playground.operator import (\n@@ -22,6 +24,7 @@ from agno.app.playground.schemas import (\n     AgentModel,\n     AgentRenameRequest,\n     AgentSessionsResponse,\n+    ContinueRunRequest,\n     MemoryResponse,\n     TeamGetResponse,\n     TeamRenameRequest,\n@@ -82,6 +85,37 @@ async def chat_response_streamer(\n         return\n \n \n+async def agent_acontinue_run_streamer(\n+    agent: Agent,\n+    run_response: Optional[RunResponse] = None,\n+    run_id: Optional[str] = None,\n+    session_id: Optional[str] = None,\n+    user_id: Optional[str] = None,\n+) -> AsyncGenerator:\n+    try:\n+        continue_response = await agent.acontinue_run(\n+            run_response=run_response,\n+            run_id=run_id,\n+            session_id=session_id,\n+            user_id=user_id,\n+            stream=True,\n+            stream_intermediate_steps=True,\n+        )\n+        async for run_response_chunk in continue_response:\n+            run_response_chunk = cast(RunResponse, run_response_chunk)\n+            yield run_response_chunk.to_json()\n+    except Exception as e:\n+        import traceback\n+\n+        traceback.print_exc(limit=3)\n+        error_response = RunResponse(\n+            content=str(e),\n+            event=RunEvent.run_error,\n+        )\n+        yield error_response.to_json()\n+        return\n+\n+\n async def team_chat_response_streamer(\n     team: Team,\n     message: str,\n@@ -363,6 +397,63 @@ def get_async_playground_router(\n             )\n             return run_response.to_dict()\n \n+    @playground_router.post(\"/agents/{agent_id}/runs/{run_id}/continue\")\n+    async def continue_agent_run(\n+        agent_id: str,\n+        run_id: str,\n+        payload: ContinueRunRequest = Body(...),  # Use the Pydantic model\n+    ):\n+        print(payload)\n+        logger.debug(\n+            f\"AgentContinueRunRequest: run_id={run_id} session_id={payload.session_id} user_id={payload.user_id} agent_id={agent_id}\"\n+        )\n+        agent = get_agent_by_id(agent_id, agents)\n+        if agent is None:\n+            raise HTTPException(status_code=404, detail=\"Agent not found\")\n+\n+        if payload.session_id is None or payload.session_id == \"\":\n+            logger.warning(\n+                \"Continuing run without session_id. This might lead to unexpected behavior if session context is important.\"\n+            )\n+        else:\n+            logger.debug(f\"Continuing run within session: {payload.session_id}\")\n+\n+        parsed_run_response = None\n+        if payload.run_response_data:\n+            try:\n+                # If run_response_data is a dict from Body(None), use it directly\n+                parsed_run_response = RunResponse.from_dict(payload.run_response_data)\n+            except Exception as e:\n+                raise HTTPException(\n+                    status_code=400, detail=f\"Invalid structure or content for run_response_data: {str(e)}\"\n+                )\n+        elif not run_id:  # run_id is still a path parameter and crucial\n+            raise HTTPException(status_code=400, detail=\"run_id is required to continue a run.\")\n+\n+        if payload.stream and agent.is_streamable:\n+            return StreamingResponse(\n+                agent_acontinue_run_streamer(\n+                    agent,\n+                    run_response=parsed_run_response,\n+                    run_id=run_id,  # run_id from path\n+                    session_id=payload.session_id,\n+                    user_id=payload.user_id,\n+                ),\n+                media_type=\"text/event-stream\",\n+            )\n+        else:\n+            run_response_obj = cast(\n+                RunResponse,\n+                await agent.acontinue_run(\n+                    run_response=parsed_run_response,\n+                    run_id=run_id,  # run_id from path\n+                    session_id=payload.session_id,\n+                    user_id=payload.user_id,\n+                    stream=False,\n+                ),\n+            )\n+            return run_response_obj.to_dict()\n+\n     @playground_router.get(\"/agents/{agent_id}/sessions\")\n     async def get_all_agent_sessions(agent_id: str, user_id: Optional[str] = Query(None, min_length=1)):\n         logger.debug(f\"AgentSessionsRequest: {agent_id} {user_id}\")\n"
        },
        {
            "commit": "3045ad82fb7ebc1182bf5d0a1d64713bec621512",
            "file_path": "libs/agno/agno/app/playground/schemas.py",
            "diff": "diff --git a/libs/agno/agno/app/playground/schemas.py b/libs/agno/agno/app/playground/schemas.py\nindex 7880b5ca8..24529bc27 100644\n--- a/libs/agno/agno/app/playground/schemas.py\n+++ b/libs/agno/agno/app/playground/schemas.py\n@@ -218,3 +218,10 @@ class TeamSessionResponse(BaseModel):\n class TeamRenameRequest(BaseModel):\n     name: str\n     user_id: str\n+\n+\n+class ContinueRunRequest(BaseModel):\n+    run_response_data: Optional[dict] = None\n+    stream: bool = True\n+    session_id: Optional[str] = None\n+    user_id: Optional[str] = None\n"
        }
    ]
}