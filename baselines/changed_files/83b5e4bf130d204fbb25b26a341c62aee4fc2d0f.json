{
    "sha_fail": "83b5e4bf130d204fbb25b26a341c62aee4fc2d0f",
    "changed_files": [
        {
            "commit": "83b5e4bf130d204fbb25b26a341c62aee4fc2d0f",
            "file_path": "httpx/__init__.py",
            "diff": "diff --git a/httpx/__init__.py b/httpx/__init__.py\nindex f61112f..1665b35 100644\n--- a/httpx/__init__.py\n+++ b/httpx/__init__.py\n@@ -2,7 +2,7 @@ from .__version__ import __description__, __title__, __version__\n from ._api import delete, get, head, options, patch, post, put, request, stream\n from ._auth import Auth, BasicAuth, DigestAuth, NetRCAuth\n from ._client import USE_CLIENT_DEFAULT, AsyncClient, Client\n-from ._config import Limits, Proxy, Timeout, create_ssl_context\n+from ._config import Limits, NetworkOptions, Proxy, Timeout, create_ssl_context\n from ._content import ByteStream\n from ._exceptions import (\n     CloseError,\n@@ -96,6 +96,7 @@ __all__ = [\n     \"MockTransport\",\n     \"NetRCAuth\",\n     \"NetworkError\",\n+    \"NetworkOptions\",\n     \"options\",\n     \"patch\",\n     \"PoolTimeout\",\n"
        },
        {
            "commit": "83b5e4bf130d204fbb25b26a341c62aee4fc2d0f",
            "file_path": "httpx/_config.py",
            "diff": "diff --git a/httpx/_config.py b/httpx/_config.py\nindex 0cfd552..69c3c6f 100644\n--- a/httpx/_config.py\n+++ b/httpx/_config.py\n@@ -12,6 +12,13 @@ from ._types import CertTypes, HeaderTypes, TimeoutTypes, URLTypes, VerifyTypes\n from ._urls import URL\n from ._utils import get_ca_bundle_from_env\n \n+\n+SOCKET_OPTION = typing.Union[\n+    typing.Tuple[int, int, int],\n+    typing.Tuple[int, int, typing.Union[bytes, bytearray]],\n+    typing.Tuple[int, int, None, int],\n+]\n+\n DEFAULT_CIPHERS = \":\".join(\n     [\n         \"ECDHE+AESGCM\",\n@@ -363,6 +370,37 @@ class Proxy:\n         return f\"Proxy({url_str}{auth_str}{headers_str})\"\n \n \n+class NetworkOptions:\n+    def __init__(\n+        self,\n+        connection_retries: int = 0,\n+        local_address: typing.Optional[str] = None,\n+        socket_options: typing.Optional[typing.Iterable[SOCKET_OPTION]] = None,\n+        uds: typing.Optional[str] = None,\n+    ) -> None:\n+        self.connection_retries = connection_retries\n+        self.local_address = local_address\n+        self.socket_options = socket_options\n+        self.uds = uds\n+\n+    def __repr__(self) -> str:\n+        defaults = {\n+            \"connection_retries\": 0,\n+            \"local_address\": None,\n+            \"socket_options\": None,\n+            \"uds\": None,\n+        }\n+        params = \", \".join(\n+            [\n+                f\"{attr}={getattr(self, attr)!r}\"\n+                for attr, default in defaults.items()\n+                if getattr(self, attr) != default\n+            ]\n+        )\n+        return f\"NetworkOptions({params})\"\n+\n+\n DEFAULT_TIMEOUT_CONFIG = Timeout(timeout=5.0)\n DEFAULT_LIMITS = Limits(max_connections=100, max_keepalive_connections=20)\n+DEFAULT_NETWORK_OPTIONS = NetworkOptions(connection_retries=0)\n DEFAULT_MAX_REDIRECTS = 20\n"
        },
        {
            "commit": "83b5e4bf130d204fbb25b26a341c62aee4fc2d0f",
            "file_path": "httpx/_transports/default.py",
            "diff": "diff --git a/httpx/_transports/default.py b/httpx/_transports/default.py\nindex 14a0873..7802026 100644\n--- a/httpx/_transports/default.py\n+++ b/httpx/_transports/default.py\n@@ -29,7 +29,14 @@ from types import TracebackType\n \n import httpcore\n \n-from .._config import DEFAULT_LIMITS, Limits, Proxy, create_ssl_context\n+from .._config import (\n+    DEFAULT_LIMITS,\n+    DEFAULT_NETWORK_OPTIONS,\n+    Proxy,\n+    Limits,\n+    NetworkOptions,\n+    create_ssl_context,\n+)\n from .._exceptions import (\n     ConnectError,\n     ConnectTimeout,\n@@ -54,12 +61,6 @@ from .base import AsyncBaseTransport, BaseTransport\n T = typing.TypeVar(\"T\", bound=\"HTTPTransport\")\n A = typing.TypeVar(\"A\", bound=\"AsyncHTTPTransport\")\n \n-SOCKET_OPTION = typing.Union[\n-    typing.Tuple[int, int, int],\n-    typing.Tuple[int, int, typing.Union[bytes, bytearray]],\n-    typing.Tuple[int, int, None, int],\n-]\n-\n \n @contextlib.contextmanager\n def map_httpcore_exceptions() -> typing.Iterator[None]:\n@@ -126,10 +127,7 @@ class HTTPTransport(BaseTransport):\n         limits: Limits = DEFAULT_LIMITS,\n         trust_env: bool = True,\n         proxy: typing.Optional[ProxyTypes] = None,\n-        uds: typing.Optional[str] = None,\n-        local_address: typing.Optional[str] = None,\n-        retries: int = 0,\n-        socket_options: typing.Optional[typing.Iterable[SOCKET_OPTION]] = None,\n+        network_options: NetworkOptions = DEFAULT_NETWORK_OPTIONS,\n     ) -> None:\n         ssl_context = create_ssl_context(verify=verify, cert=cert, trust_env=trust_env)\n         proxy = Proxy(url=proxy) if isinstance(proxy, (str, URL)) else proxy\n@@ -142,10 +140,10 @@ class HTTPTransport(BaseTransport):\n                 keepalive_expiry=limits.keepalive_expiry,\n                 http1=http1,\n                 http2=http2,\n-                uds=uds,\n-                local_address=local_address,\n-                retries=retries,\n-                socket_options=socket_options,\n+                uds=network_options.uds,\n+                local_address=network_options.local_address,\n+                retries=network_options.connection_retries,\n+                socket_options=network_options.socket_options,\n             )\n         elif proxy.url.scheme in (\"http\", \"https\"):\n             self._pool = httpcore.HTTPProxy(\n@@ -164,7 +162,10 @@ class HTTPTransport(BaseTransport):\n                 keepalive_expiry=limits.keepalive_expiry,\n                 http1=http1,\n                 http2=http2,\n-                socket_options=socket_options,\n+                uds=network_options.uds,\n+                local_address=network_options.local_address,\n+                retries=network_options.connection_retries,\n+                socket_options=network_options.socket_options,\n             )\n         elif proxy.url.scheme == \"socks5\":\n             try:\n@@ -267,10 +268,7 @@ class AsyncHTTPTransport(AsyncBaseTransport):\n         limits: Limits = DEFAULT_LIMITS,\n         trust_env: bool = True,\n         proxy: typing.Optional[ProxyTypes] = None,\n-        uds: typing.Optional[str] = None,\n-        local_address: typing.Optional[str] = None,\n-        retries: int = 0,\n-        socket_options: typing.Optional[typing.Iterable[SOCKET_OPTION]] = None,\n+        network_options: NetworkOptions = DEFAULT_NETWORK_OPTIONS,\n     ) -> None:\n         ssl_context = create_ssl_context(verify=verify, cert=cert, trust_env=trust_env)\n         proxy = Proxy(url=proxy) if isinstance(proxy, (str, URL)) else proxy\n@@ -283,10 +281,10 @@ class AsyncHTTPTransport(AsyncBaseTransport):\n                 keepalive_expiry=limits.keepalive_expiry,\n                 http1=http1,\n                 http2=http2,\n-                uds=uds,\n-                local_address=local_address,\n-                retries=retries,\n-                socket_options=socket_options,\n+                uds=network_options.uds,\n+                local_address=network_options.local_address,\n+                retries=network_options.connection_retries,\n+                socket_options=network_options.socket_options,\n             )\n         elif proxy.url.scheme in (\"http\", \"https\"):\n             self._pool = httpcore.AsyncHTTPProxy(\n@@ -304,7 +302,10 @@ class AsyncHTTPTransport(AsyncBaseTransport):\n                 keepalive_expiry=limits.keepalive_expiry,\n                 http1=http1,\n                 http2=http2,\n-                socket_options=socket_options,\n+                uds=network_options.uds,\n+                local_address=network_options.local_address,\n+                retries=network_options.connection_retries,\n+                socket_options=network_options.socket_options,\n             )\n         elif proxy.url.scheme == \"socks5\":\n             try:\n"
        },
        {
            "commit": "83b5e4bf130d204fbb25b26a341c62aee4fc2d0f",
            "file_path": "tests/test_config.py",
            "diff": "diff --git a/tests/test_config.py b/tests/test_config.py\nindex 6f6ee4f..cef0aa3 100644\n--- a/tests/test_config.py\n+++ b/tests/test_config.py\n@@ -221,3 +221,18 @@ def test_proxy_with_auth_from_url():\n def test_invalid_proxy_scheme():\n     with pytest.raises(ValueError):\n         httpx.Proxy(\"invalid://example.com\")\n+\n+\n+def test_network_options():\n+    network_options = httpx.NetworkOptions()\n+    assert repr(network_options) == \"NetworkOptions()\"\n+\n+    network_options = httpx.NetworkOptions(connection_retries=1)\n+    assert repr(network_options) == \"NetworkOptions(connection_retries=1)\"\n+\n+    network_options = httpx.NetworkOptions(\n+        connection_retries=1, local_address=\"0.0.0.0\"\n+    )\n+    assert repr(network_options) == (\n+        \"NetworkOptions(connection_retries=1, local_address='0.0.0.0')\"\n+    )\n"
        }
    ]
}